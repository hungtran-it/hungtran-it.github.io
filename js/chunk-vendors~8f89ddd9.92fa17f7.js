(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-vendors~8f89ddd9"],{"00d7":function(t,e,r){"use strict";function o(t){var e,r,o=new Promise(function(){e=arguments[0],r=arguments[1]});return t||(t=new n,o._events=t._events,o.emit=t.emit,o.on=t.on,o.once=t.once,o.off=t.off,o.listeners=t.listeners,o.addListener=t.addListener,o.removeListener=t.removeListener,o.removeAllListeners=t.removeAllListeners),{resolve:e,reject:r,eventEmitter:o}}var n=r("ba10");o.resolve=function(t){var e=o(!0);return e.resolve(t),e.eventEmitter},t.exports=o},"166e":function(t,e,r){"use strict";const s=r("3022")["callbackify"];function o(t,e){this.provider=null,this.providers=o.providers,this.setProvider(t,e),this.subscriptions=new Map}var a=r("c044").errors,c=r("8f78"),n=r("899d"),i=r("3229");o.givenProvider=i,o.providers={WebsocketProvider:r("a4ca"),HttpProvider:r("64e4"),IpcProvider:r("6cdc")},o.prototype.setProvider=function(t,e){var r=this;if(t&&"string"==typeof t&&this.providers)if(/^http(s)?:\/\//i.test(t))t=new this.providers.HttpProvider(t);else if(/^ws(s)?:\/\//i.test(t))t=new this.providers.WebsocketProvider(t);else if(t&&"object"==typeof e&&"function"==typeof e.connect)t=new this.providers.IpcProvider(t,e);else if(t)throw new Error("Can't autodetect provider for \""+t+'"');if(this.provider&&this.provider.connected&&this.clearSubscriptions(),this.provider=t||null,this.provider&&this.provider.on){"function"==typeof t.request?this.provider.on("message",function(t){t&&"eth_subscription"===t.type&&t.data&&((t=t.data).subscription&&r.subscriptions.has(t.subscription)&&r.subscriptions.get(t.subscription).callback(null,t.result))}):this.provider.on("data",function(t,e){(t=t||e).method&&t.params&&t.params.subscription&&r.subscriptions.has(t.params.subscription)&&r.subscriptions.get(t.params.subscription).callback(null,t.params.result)}),this.provider.on("connect",function(){r.subscriptions.forEach(function(t){t.subscription.resubscribe()})}),this.provider.on("error",function(e){r.subscriptions.forEach(function(t){t.callback(e)})});const e=function(e){r._isCleanCloseEvent(e)&&!r._isIpcCloseError(e)||(r.subscriptions.forEach(function(t){t.callback(a.ConnectionCloseError(e)),r.subscriptions.delete(t.subscription.id)}),r.provider&&r.provider.emit&&r.provider.emit("error",a.ConnectionCloseError(e))),r.provider&&r.provider.emit&&r.provider.emit("end",e)};this.provider.on("close",e),this.provider.on("disconnect",e)}},o.prototype.send=function(t,e){if(e=e||function(){},!this.provider)return e(a.InvalidProvider());var{method:r,params:o}=t,n=c.toPayload(r,o),t=this._jsonrpcResultCallback(e,n);if(this.provider.request){const i=s(this.provider.request.bind(this.provider)),a={method:r,params:o};i(a,e)}else if(this.provider.sendAsync)this.provider.sendAsync(n,t);else{if(!this.provider.send)throw new Error("Provider does not have a request or send method to use.");this.provider.send(n,t)}},o.prototype.sendBatch=function(t,r){if(!this.provider)return r(a.InvalidProvider());t=c.toBatchPayload(t);this.provider[this.provider.sendAsync?"sendAsync":"send"](t,function(t,e){return t?r(t):Array.isArray(e)?void r(null,e):r(a.InvalidResponse(e))})},o.prototype.addSubscription=function(t,e){if(!this.provider.on)throw new Error("The provider doesn't support subscriptions: "+this.provider.constructor.name);this.subscriptions.set(t.id,{callback:e,subscription:t})},o.prototype.removeSubscription=function(t,e){if(this.subscriptions.has(t)){var r=this.subscriptions.get(t).subscription.options.type;return this.subscriptions.delete(t),void this.send({method:r+"_unsubscribe",params:[t]},e)}"function"==typeof e&&e(null)},o.prototype.clearSubscriptions=function(r){try{var o=this;return 0<this.subscriptions.size&&this.subscriptions.forEach(function(t,e){r&&"syncing"===t.name||o.removeSubscription(e)}),this.provider.reset&&this.provider.reset(),!0}catch(t){throw new Error("Error while clearing subscriptions: "+t)}},o.prototype._isCleanCloseEvent=function(t){return"object"==typeof t&&([1e3].includes(t.code)||!0===t.wasClean)},o.prototype._isIpcCloseError=function(t){return"boolean"==typeof t&&t},o.prototype._jsonrpcResultCallback=function(r,o){return function(t,e){return e&&e.id&&o.id!==e.id?r(new Error(`Wrong response id ${e.id} (expected: ${o.id}) in `+JSON.stringify(o))):t?r(t):e&&e.error?r(a.ErrorResponse(e)):c.isValidResponse(e)?void r(null,e.result):r(a.InvalidResponse(e))}},t.exports={Manager:o,BatchManager:n}},3229:function(t,e,r){"use strict";var o,n=null;try{o=Function("return this")()}catch(t){o=window}void 0!==o.ethereum?n=o.ethereum:void 0!==o.web3&&o.web3.currentProvider&&(o.web3.currentProvider.sendAsync&&(o.web3.currentProvider.send=o.web3.currentProvider.sendAsync,delete o.web3.currentProvider.sendAsync),!o.web3.currentProvider.on&&o.web3.currentProvider.connection&&"ipcProviderWrapper"===o.web3.currentProvider.connection.constructor.name&&(o.web3.currentProvider.on=function(t,r){if("function"!=typeof r)throw new Error("The second parameter callback must be a function.");"data"===t?this.connection.on("data",function(e){var t="";e=e.toString();try{t=JSON.parse(e)}catch(t){return r(new Error("Couldn't parse response data"+e))}t.id||-1===t.method.indexOf("_subscription")||r(null,t)}):this.connection.on(t,r)}),n=o.web3.currentProvider),t.exports=n},"490f":function(t,e,r){"use strict";t.exports={ErrorResponse:function(t){var e=t&&t.error&&t.error.message?t.error.message:JSON.stringify(t),t=t.error&&t.error.data?t.error.data:null,e=new Error("Returned error: "+e);return e.data=t,e},InvalidNumberOfParams:function(t,e,r){return new Error('Invalid number of parameters for "'+r+'". Got '+t+" expected "+e+"!")},InvalidConnection:function(t,e){return this.ConnectionError("CONNECTION ERROR: Couldn't connect to node "+t+".",e)},InvalidProvider:function(){return new Error("Provider not set or invalid")},InvalidResponse:function(t){t=t&&t.error&&t.error.message?t.error.message:"Invalid JSON RPC response: "+JSON.stringify(t);return new Error(t)},ConnectionTimeout:function(t){return new Error("CONNECTION TIMEOUT: timeout of "+t+" ms achived")},ConnectionNotOpenError:function(t){return this.ConnectionError("connection not open on send()",t)},ConnectionCloseError:function(t){return"object"==typeof t&&t.code&&t.reason?this.ConnectionError("CONNECTION ERROR: The connection got closed with the close code `"+t.code+"` and the following reason string `"+t.reason+"`",t):new Error("CONNECTION ERROR: The connection closed unexpectedly")},MaxAttemptsReachedOnReconnectingError:function(){return new Error("Maximum number of reconnect attempts reached!")},PendingRequestsOnReconnectingError:function(){return new Error("CONNECTION ERROR: Provider started to reconnect before the response got received!")},ConnectionError:function(t,e){const r=new Error(t);return e&&(r.code=e.code,r.reason=e.reason),r},RevertInstructionError:function(t,e){var r=new Error("Your request got reverted with the following reason string: "+t);return r.reason=t,r.signature=e,r},TransactionRevertInstructionError:function(t,e,r){var o=new Error("Transaction has been reverted by the EVM:\n"+JSON.stringify(r,null,2));return o.reason=t,o.signature=e,o.receipt=r,o},TransactionError:function(t,e){t=new Error(t);return t.receipt=e,t},NoContractAddressFoundError:function(t){return this.TransactionError("The transaction receipt didn't contain a contract address.",t)},ContractCodeNotStoredError:function(t){return this.TransactionError("The contract code couldn't be stored, please check your gas limit.",t)},TransactionRevertedWithoutReasonError:function(t){return this.TransactionError("Transaction has been reverted by the EVM:\n"+JSON.stringify(t,null,2),t)},TransactionOutOfGasError:function(t){return this.TransactionError("Transaction ran out of gas. Please provide more gas:\n"+JSON.stringify(t,null,2),t)},ResolverMethodMissingError:function(t,e){return new Error("The resolver at "+t+'does not implement requested method: "'+e+'".')},ContractMissingABIError:function(){return new Error("You must provide the json interface of the contract when instantiating a contract object.")},ContractOnceRequiresCallbackError:function(){return new Error("Once requires a callback as the second parameter.")},ContractEventDoesNotExistError:function(t){return new Error('Event "'+t+"\" doesn't exist in this contract.")},ContractReservedEventError:function(t){return new Error('The event "'+t+"\" is a reserved event name, you can't use it.")},ContractMissingDeployDataError:function(){return new Error('No "data" specified in neither the given options, nor the default options.')},ContractNoAddressDefinedError:function(){return new Error("This contract object doesn't have address set yet, please set an address first.")},ContractNoFromAddressDefinedError:function(){return new Error('No "from" address specified in neither the given options, nor the default options.')}}},"68e2":function(t,e,r){"use strict";function o(t){return c.toBN(t).toString(10)}function n(t){if(void 0!==t)return l(t)?t:"genesis"===t?"0x0":c.isHexStrict(t)?"string"==typeof t?t.toLowerCase():t:c.numberToHex(t)}function i(e){if(e.to&&(e.to=p(e.to)),e.data&&e.input)throw new Error('You can\'t have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.');if(!e.data&&e.input&&(e.data=e.input,delete e.input),e.data&&!e.data.startsWith("0x")&&(e.data="0x"+e.data),e.data&&!c.isHex(e.data))throw new Error("The data field must be HEX encoded data.");return(e.gas||e.gasLimit)&&(e.gas=e.gas||e.gasLimit),(e.maxPriorityFeePerGas||e.maxFeePerGas)&&delete e.gasPrice,["gasPrice","gas","value","maxPriorityFeePerGas","maxFeePerGas","nonce"].filter(function(t){return void 0!==e[t]}).forEach(function(t){e[t]=c.numberToHex(e[t])}),e}function s(t){return null!==t.blockNumber&&(t.blockNumber=c.hexToNumber(t.blockNumber)),null!==t.transactionIndex&&(t.transactionIndex=c.hexToNumber(t.transactionIndex)),t.nonce=c.hexToNumber(t.nonce),t.gas=c.hexToNumber(t.gas),t.gasPrice&&(t.gasPrice=o(t.gasPrice)),t.maxFeePerGas&&(t.maxFeePerGas=o(t.maxFeePerGas)),t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=o(t.maxPriorityFeePerGas)),t.type&&(t.type=c.hexToNumber(t.type)),t.value=o(t.value),t.to&&c.isAddress(t.to)?t.to=c.toChecksumAddress(t.to):t.to=null,t.from&&(t.from=c.toChecksumAddress(t.from)),t}function a(t){var e;return"string"==typeof t.blockHash&&"string"==typeof t.transactionHash&&"string"==typeof t.logIndex?(e=c.sha3(t.blockHash.replace("0x","")+t.transactionHash.replace("0x","")+t.logIndex.replace("0x","")),t.id="log_"+e.replace("0x","").substr(0,8)):t.id||(t.id=null),null!==t.blockNumber&&(t.blockNumber=c.hexToNumber(t.blockNumber)),null!==t.transactionIndex&&(t.transactionIndex=c.hexToNumber(t.transactionIndex)),null!==t.logIndex&&(t.logIndex=c.hexToNumber(t.logIndex)),t.address&&(t.address=c.toChecksumAddress(t.address)),t}var c=r("5ba3"),u=r("5fa0"),l=function(t){return"latest"===t||"pending"===t||"earliest"===t},p=function(t){var e=new u(t);if(e.isValid()&&e.isDirect())return e.toAddress().toLowerCase();if(c.isAddress(t))return"0x"+t.toLowerCase().replace("0x","");throw new Error(`Provided address ${t} is invalid, the capitalization checksum test failed, or it's an indirect IBAN address which can't be converted.`)};t.exports={inputDefaultBlockNumberFormatter:function(t){return n(this&&null==t?this.defaultBlock:t)},inputBlockNumberFormatter:n,inputCallFormatter:function(t){var e=(t=i(t)).from||(this?this.defaultAccount:null);return e&&(t.from=p(e)),t},inputTransactionFormatter:function(t){if("number"!=typeof(t=i(t)).from&&(!t.from||"object"!=typeof t.from)){if(t.from=t.from||(this?this.defaultAccount:null),!t.from&&"number"!=typeof t.from)throw new Error('The send transactions "from" field must be defined!');t.from=p(t.from)}return t},inputAddressFormatter:p,inputPostFormatter:function(t){return t.ttl&&(t.ttl=c.numberToHex(t.ttl)),t.workToProve&&(t.workToProve=c.numberToHex(t.workToProve)),t.priority&&(t.priority=c.numberToHex(t.priority)),Array.isArray(t.topics)||(t.topics=t.topics?[t.topics]:[]),t.topics=t.topics.map(function(t){return 0===t.indexOf("0x")?t:c.fromUtf8(t)}),t},inputLogFormatter:function(t){var e=function(t){return null==t?null:0===(t=String(t)).indexOf("0x")?t:c.fromUtf8(t)};return!(t=void 0===(t=void 0===t?{}:t).fromBlock?{...t,fromBlock:"latest"}:t).fromBlock&&0!==t.fromBlock||(t.fromBlock=n(t.fromBlock)),!t.toBlock&&0!==t.toBlock||(t.toBlock=n(t.toBlock)),t.topics=t.topics||[],t.topics=t.topics.map(function(t){return Array.isArray(t)?t.map(e):e(t)}),e=null,t.address&&(t.address=Array.isArray(t.address)?t.address.map(function(t){return p(t)}):p(t.address)),t},inputSignFormatter:function(t){return c.isHexStrict(t)?t:c.utf8ToHex(t)},inputStorageKeysFormatter:function(t){return t.map(c.numberToHex)},outputProofFormatter:function(t){return t.address=c.toChecksumAddress(t.address),t.nonce=c.hexToNumberString(t.nonce),t.balance=c.hexToNumberString(t.balance),t},outputBigNumberFormatter:o,outputTransactionFormatter:s,outputTransactionReceiptFormatter:function(t){if("object"!=typeof t)throw new Error("Received receipt is invalid: "+t);return null!==t.blockNumber&&(t.blockNumber=c.hexToNumber(t.blockNumber)),null!==t.transactionIndex&&(t.transactionIndex=c.hexToNumber(t.transactionIndex)),t.cumulativeGasUsed=c.hexToNumber(t.cumulativeGasUsed),t.gasUsed=c.hexToNumber(t.gasUsed),Array.isArray(t.logs)&&(t.logs=t.logs.map(a)),t.effectiveGasPrice&&(t.effectiveGasPrice=c.hexToNumber(t.effectiveGasPrice)),t.contractAddress&&(t.contractAddress=c.toChecksumAddress(t.contractAddress)),void 0!==t.status&&null!==t.status&&(t.status=Boolean(parseInt(t.status))),t},outputBlockFormatter:function(t){return t.gasLimit=c.hexToNumber(t.gasLimit),t.gasUsed=c.hexToNumber(t.gasUsed),t.size=c.hexToNumber(t.size),t.timestamp=c.hexToNumber(t.timestamp),null!==t.number&&(t.number=c.hexToNumber(t.number)),t.difficulty&&(t.difficulty=o(t.difficulty)),t.totalDifficulty&&(t.totalDifficulty=o(t.totalDifficulty)),Array.isArray(t.transactions)&&t.transactions.forEach(function(t){if("string"!=typeof t)return s(t)}),t.miner&&(t.miner=c.toChecksumAddress(t.miner)),t.baseFeePerGas&&(t.baseFeePerGas=c.hexToNumber(t.baseFeePerGas)),t},outputLogFormatter:a,outputPostFormatter:function(t){return t.expiry=c.hexToNumber(t.expiry),t.sent=c.hexToNumber(t.sent),t.ttl=c.hexToNumber(t.ttl),t.workProved=c.hexToNumber(t.workProved),t.topics||(t.topics=[]),t.topics=t.topics.map(function(t){return c.toUtf8(t)}),t},outputSyncingFormatter:function(t){return t.startingBlock=c.hexToNumber(t.startingBlock),t.currentBlock=c.hexToNumber(t.currentBlock),t.highestBlock=c.hexToNumber(t.highestBlock),t.knownStates&&(t.knownStates=c.hexToNumber(t.knownStates),t.pulledStates=c.hexToNumber(t.pulledStates)),t}}},7789:function(t,e,r){"use strict";var w=r("c044").errors,P=r("c044").formatters,k=r("5ba3"),x=r("00d7"),o=r("c3e6").subscriptions,T=r("5ac3"),N=function(t){if(!t.call||!t.name)throw new Error('When creating a method you need to provide at least the "name" and "call" property.');this.name=t.name,this.call=t.call,this.params=t.params||0,this.inputFormatter=t.inputFormatter,this.outputFormatter=t.outputFormatter,this.transformPayload=t.transformPayload,this.extraFormatters=t.extraFormatters,this.abiCoder=t.abiCoder,this.requestManager=t.requestManager,this.accounts=t.accounts,this.defaultBlock=t.defaultBlock||"latest",this.defaultAccount=t.defaultAccount||null,this.transactionBlockTimeout=t.transactionBlockTimeout||50,this.transactionConfirmationBlocks=t.transactionConfirmationBlocks||24,this.transactionPollingTimeout=t.transactionPollingTimeout||750,this.transactionPollingInterval=t.transactionPollingInterval||1e3,this.blockHeaderTimeout=t.blockHeaderTimeout||10,this.defaultCommon=t.defaultCommon,this.defaultChain=t.defaultChain,this.defaultHardfork=t.defaultHardfork,this.handleRevert=t.handleRevert};N.prototype.setRequestManager=function(t,e){this.requestManager=t,e&&(this.accounts=e)},N.prototype.createFunction=function(t,e){var r=this.buildCall();return r.call=this.call,this.setRequestManager(t||this.requestManager,e||this.accounts),r},N.prototype.attachToObject=function(t){var e=this.buildCall();e.call=this.call;var r=this.name.split(".");1<r.length?(t[r[0]]=t[r[0]]||{},t[r[0]][r[1]]=e):t[r[0]]=e},N.prototype.getCall=function(t){return"function"==typeof this.call?this.call(t):this.call},N.prototype.extractCallback=function(t){if("function"==typeof t[t.length-1])return t.pop()},N.prototype.validateArgs=function(t){if(t.length!==this.params)throw w.InvalidNumberOfParams(t.length,this.params,this.name)},N.prototype.formatInput=function(r){var o=this;return this.inputFormatter?this.inputFormatter.map(function(t,e){return t?t.call(o,r[e]):r[e]}):r},N.prototype.formatOutput=function(t){var e=this;return Array.isArray(t)?t.map(function(t){return e.outputFormatter&&t?e.outputFormatter(t):t}):this.outputFormatter&&t?this.outputFormatter(t):t},N.prototype.toPayload=function(t){var e=this.getCall(t),r=this.extractCallback(t),t=this.formatInput(t);this.validateArgs(t);r={method:e,params:t,callback:r};return r=this.transformPayload?this.transformPayload(r):r},N.prototype._confirmTransaction=function(s,r,a){var c=this,u=!1,l=!0,p=0,d=0,m=null,f=null,h=null,v=a.params[0]&&"object"==typeof a.params[0]&&a.params[0].gas?a.params[0].gas:null,b=!!a.params[0]&&"object"==typeof a.params[0]&&a.params[0].data&&a.params[0].from&&!a.params[0].to,g=b&&2<a.params[0].data.length,t=[new N({name:"getBlockByNumber",call:"eth_getBlockByNumber",params:2,inputFormatter:[P.inputBlockNumberFormatter,function(t){return!!t}],outputFormatter:P.outputBlockFormatter}),new N({name:"getTransactionReceipt",call:"eth_getTransactionReceipt",params:1,inputFormatter:[null],outputFormatter:P.outputTransactionReceiptFormatter}),new N({name:"getCode",call:"eth_getCode",params:2,inputFormatter:[P.inputAddressFormatter,P.inputDefaultBlockNumberFormatter]}),new N({name:"getTransactionByHash",call:"eth_getTransactionByHash",params:1,inputFormatter:[null],outputFormatter:P.outputTransactionFormatter}),new o({name:"subscribe",type:"eth",subscriptions:{newBlockHeaders:{subscriptionName:"newHeads",params:0,outputFormatter:P.outputBlockFormatter}}})],y={};t.forEach(t=>{t.attachToObject(y),t.requestManager=c.requestManager});function E(o,n,t,e,i){if(!t)return i=i||{unsubscribe:function(){clearInterval(m),clearTimeout(f)}},(o?x.resolve(o):y.getTransactionReceipt(r)).catch(function(t){i.unsubscribe(),u=!0,k._fireError({message:"Failed to check for transaction receipt:",data:t},s.eventEmitter,s.reject)}).then(async function(t){if(!t||!t.blockHash)throw new Error("Receipt missing or blockHash null");var e,r;return c.extraFormatters&&c.extraFormatters.receiptFormatter&&(t=c.extraFormatters.receiptFormatter(t)),0<s.eventEmitter.listeners("confirmation").length&&(void 0!==o&&0===d||(r=(r=await y.getBlockByNumber("latest"))?r.hash:null,n?h?(e=await y.getBlockByNumber(h.number+1))&&(h=e,s.eventEmitter.emit("confirmation",d,t,r)):(e=await y.getBlockByNumber(t.blockNumber),h=e,s.eventEmitter.emit("confirmation",d,t,r)):s.eventEmitter.emit("confirmation",d,t,r)),(n&&e||!n)&&d++,l=!1,d===c.transactionConfirmationBlocks+1&&(i.unsubscribe(),s.eventEmitter.removeAllListeners())),t}).then(async function(t){if(b&&!u){if(!t.contractAddress)return l&&(i.unsubscribe(),u=!0),void k._fireError(w.NoContractAddressFoundError(t),s.eventEmitter,s.reject,null,t);var e;try{e=await y.getCode(t.contractAddress)}catch(t){}if(!e)return;!0===t.status&&g||2<e.length?(s.eventEmitter.emit("receipt",t),c.extraFormatters&&c.extraFormatters.contractDeployFormatter?s.resolve(c.extraFormatters.contractDeployFormatter(t)):s.resolve(t),l&&s.eventEmitter.removeAllListeners()):k._fireError(w.ContractCodeNotStoredError(t),s.eventEmitter,s.reject,null,t),l&&i.unsubscribe(),u=!0}return t}).then(async function(e){if(!b&&!u){if(e.outOfGas||v&&v===e.gasUsed||!0!==e.status&&"0x1"!==e.status&&void 0!==e.status)if(JSON.stringify(e,null,2),!1===e.status||"0x0"===e.status)try{var t;if(!c.handleRevert||"eth_sendTransaction"!==c.call&&"eth_sendRawTransaction"!==c.call)throw!1;var r,o,n=a.params[0];if("eth_sendRawTransaction"===c.call&&(r=a.params[0],o=T.parse(r),n=P.inputTransactionFormatter({data:o.data,to:o.to,from:o.from,gas:o.gasLimit.toHexString(),gasPrice:o.gasPrice.toHexString(),value:o.value.toHexString()})),!(t=await c.getRevertReason(n,e.blockNumber)))throw!1;k._fireError(w.TransactionRevertInstructionError(t.reason,t.signature,e),s.eventEmitter,s.reject,null,e)}catch(t){k._fireError(w.TransactionRevertedWithoutReasonError(e),s.eventEmitter,s.reject,null,e)}else k._fireError(w.TransactionOutOfGasError(e),s.eventEmitter,s.reject,null,e);else s.eventEmitter.emit("receipt",e),s.resolve(e),l&&s.eventEmitter.removeAllListeners();l&&i.unsubscribe(),u=!0}}).catch(function(){p++,n?p-1>=c.transactionPollingTimeout&&(i.unsubscribe(),u=!0,k._fireError(w.TransactionError("Transaction was not mined within "+c.transactionPollingTimeout+" seconds, please make sure your transaction was properly sent. Be aware that it might still be mined!"),s.eventEmitter,s.reject)):p-1>=c.transactionBlockTimeout&&(i.unsubscribe(),u=!0,k._fireError(w.TransactionError("Transaction was not mined within "+c.transactionBlockTimeout+" blocks, please make sure your transaction was properly sent. Be aware that it might still be mined!"),s.eventEmitter,s.reject))});i.unsubscribe(),u=!0,k._fireError({message:"Failed to subscribe to new newBlockHeaders to confirm the transaction receipts.",data:t},s.eventEmitter,s.reject)}var e=function(o){let n=!1;const i=()=>{m=setInterval(E.bind(null,o,!0),c.transactionPollingInterval)};if(!this.requestManager.provider.on)return i();y.subscribe("newBlockHeaders",function(t,e,r){return n=!0,t||!e?i():void E(o,!1,t,0,r)}),f=setTimeout(()=>{n||i()},1e3*this.blockHeaderTimeout)}.bind(this);y.getTransactionReceipt(r).then(function(t){t&&t.blockHash?(0<s.eventEmitter.listeners("confirmation").length&&e(t),E(t,!1)):u||e()}).catch(function(){u||e()})};function m(t,e){return"number"==typeof t?e.wallet[t]:t&&"object"==typeof t&&t.address&&t.privateKey?t:e.wallet[t.toLowerCase()]}N.prototype.buildCall=function(){function t(){function n(t){t={...c,method:"eth_sendRawTransaction",params:[t.rawTransaction]},l.requestManager.send(t,u)}function e(t,e){if(e&&e.accounts&&e.accounts.wallet&&e.accounts.wallet.length)if("eth_sendTransaction"===t.method){var r=t.params[0];if((o=m(r&&"object"==typeof r?r.from:null,e.accounts))&&o.privateKey)return delete(r=JSON.parse(JSON.stringify(r))).from,e.defaultChain&&!r.chain&&(r.chain=e.defaultChain),e.defaultHardfork&&!r.hardfork&&(r.hardfork=e.defaultHardfork),e.defaultCommon&&!r.common&&(r.common=e.defaultCommon),e.accounts.signTransaction(r,o.privateKey).then(n).catch(function(t){if("function"==typeof a.eventEmitter.listeners&&a.eventEmitter.listeners("error").length){try{a.eventEmitter.emit("error",t)}catch(t){}a.eventEmitter.removeAllListeners(),a.eventEmitter.catch(function(){})}a.reject(t)}),0}else if("eth_sign"===t.method){r=t.params[1];if((o=m(t.params[0],e.accounts))&&o.privateKey){var o=e.accounts.sign(r,o.privateKey);return t.callback&&t.callback(null,o.signature),a.resolve(o.signature),0}}return e.requestManager.send(t,u)}var i,s,a=x(!p),c=l.toPayload(Array.prototype.slice.call(arguments)),u=function(e,t){if(l.handleRevert&&d&&l.abiCoder&&(!e&&l.isRevertReasonString(t)?o=t.substring(10):e&&e.data&&(o=e.data.substring(10)),o)){var r=l.abiCoder.decodeParameter("string","0x"+o),o="Error(String)";k._fireError(w.RevertInstructionError(r,o),a.eventEmitter,a.reject,c.callback,{reason:r,signature:o})}else{try{t=l.formatOutput(t)}catch(t){e=t}if(e=t instanceof Error?t:e)return e.error&&(e=e.error),k._fireError(e,a.eventEmitter,a.reject,c.callback);c.callback&&c.callback(null,t),p?(a.eventEmitter.emit("transactionHash",t),l._confirmTransaction(a,t,c)):e||a.resolve(t)}};return p&&c.params[0]&&"object"==typeof c.params[0]&&void 0===c.params[0].gasPrice&&(void 0===c.params[0].maxPriorityFeePerGas||void 0===c.params[0].maxFeePerGas)?(i=l,s=c.params[0],new Promise((o,e)=>{try{var t=new N({name:"getBlockByNumber",call:"eth_getBlockByNumber",params:2,inputFormatter:[function(t){return t?k.toHex(t):"latest"},function(){return!1}]}).createFunction(i.requestManager),r=new N({name:"getGasPrice",call:"eth_gasPrice",params:0}).createFunction(i.requestManager);Promise.all([t(),r()]).then(t=>{var[r,t]=t;if(("0x2"===s.type||void 0===s.type)&&r&&r.baseFeePerGas){let t,e;s.gasPrice?(t=s.gasPrice,e=s.gasPrice,delete s.gasPrice):(t=s.maxPriorityFeePerGas||"0x9502F900",e=s.maxFeePerGas||k.toHex(k.toBN(r.baseFeePerGas).mul(k.toBN(2)).add(k.toBN(t)))),o({maxFeePerGas:e,maxPriorityFeePerGas:t})}else{if(s.maxPriorityFeePerGas||s.maxFeePerGas)throw Error("Network doesn't support eip-1559");o({gasPrice:t})}})}catch(t){e(t)}}).then(t=>{void 0!==t.gasPrice?c.params[0].gasPrice=t.gasPrice:void 0!==t.maxPriorityFeePerGas&&void 0!==t.maxFeePerGas&&(c.params[0].maxPriorityFeePerGas=t.maxPriorityFeePerGas,c.params[0].maxFeePerGas=t.maxFeePerGas),p&&setTimeout(()=>{a.eventEmitter.emit("sending",c)},0),e(c,l)})):(p&&setTimeout(()=>{a.eventEmitter.emit("sending",c)},0),e(c,l)),p&&setTimeout(()=>{a.eventEmitter.emit("sent",c)},0),a.eventEmitter}var l=this,p="eth_sendTransaction"===l.call||"eth_sendRawTransaction"===l.call,d="eth_call"===l.call;return t.method=l,t.request=this.request.bind(this),t},N.prototype.getRevertReason=function(t,o){var n=this;return new Promise(function(e,r){new N({name:"call",call:"eth_call",params:2,abiCoder:n.abiCoder,handleRevert:!0}).createFunction(n.requestManager)(t,k.numberToHex(o)).then(function(){e(!1)}).catch(function(t){t.reason?e({reason:t.reason,signature:t.signature}):r(t)})})},N.prototype.isRevertReasonString=function(t){return"string"==typeof t&&(t.length-2)/2%32==4&&"0x08c379a0"===t.substring(0,10)},N.prototype.request=function(){var t=this.toPayload(Array.prototype.slice.call(arguments));return t.format=this.formatOutput.bind(this),t},t.exports=N},"899d":function(t,e,r){"use strict";function o(t){this.requestManager=t,this.requests=[]}var n=r("8f78"),i=r("c044").errors;o.prototype.add=function(t){this.requests.push(t)},o.prototype.execute=function(){var o=this.requests,e=this._sortResponses.bind(this);this.requestManager.sendBatch(o,function(t,r){r=e(r),o.map(function(t,e){return r[e]||{}}).forEach(function(t,e){if(o[e].callback){if(t&&t.error)return o[e].callback(i.ErrorResponse(t));if(!n.isValidResponse(t))return o[e].callback(i.InvalidResponse(t));try{o[e].callback(null,o[e].format?o[e].format(t.result):t.result)}catch(t){o[e].callback(t)}}})})},o.prototype._sortResponses=function(t){return(t||[]).sort((t,e)=>t.id-e.id)},t.exports=o},"8f78":function(t,e,r){"use strict";var o={messageId:0,toPayload:function(t,e){if(!t)throw new Error('JSONRPC method should be specified for params: "'+JSON.stringify(e)+'"!');return o.messageId++,{jsonrpc:"2.0",id:o.messageId,method:t,params:e||[]}},isValidResponse:function(t){return Array.isArray(t)?t.every(e):e(t);function e(t){return!(!t||t.error||"2.0"!==t.jsonrpc||"number"!=typeof t.id&&"string"!=typeof t.id||void 0===t.result)}},toBatchPayload:function(t){return t.map(function(t){return o.toPayload(t.method,t.params)})}};t.exports=o},ac5c:function(t,e,r){"use strict";function o(t){this.givenProvider=o.givenProvider,t&&t._requestManager&&(t=t.currentProvider),"undefined"!=typeof document&&(this.pick=n.pick),this.setProvider(t)}var n=r("33fb");o.givenProvider=null,"undefined"!=typeof ethereum&&ethereum.bzz&&(o.givenProvider=ethereum.bzz),o.prototype.setProvider=function(t){if("string"==typeof(t=t&&"object"==typeof t&&"string"==typeof t.bzz?t.bzz:t))return this.currentProvider=t,this.download=n.at(t).download,this.upload=n.at(t).upload,this.isAvailable=n.at(t).isAvailable,!0;this.currentProvider=null;var e=new Error("No provider set, please set one using bzz.setProvider().");return!(this.download=this.upload=this.isAvailable=function(){throw e})},t.exports=o},b287:function(t,e,r){"use strict";var o=r("c044").errors,n=r("ba10"),i=r("c044").formatters;function s(t){return t}function a(t){n.call(this),this.id=null,this.callback=s,this.arguments=null,this.lastBlock=null,this.options={subscription:t.subscription,type:t.type,requestManager:t.requestManager}}((a.prototype=Object.create(n.prototype)).constructor=a).prototype._extractCallback=function(t){if("function"==typeof t[t.length-1])return t.pop()},a.prototype._validateArgs=function(t){var e=this.options.subscription;if((e=e||{}).params||(e.params=0),t.length!==e.params)throw o.InvalidNumberOfParams(t.length,e.params,e.subscriptionName)},a.prototype._formatInput=function(r){var t=this.options.subscription;return t&&t.inputFormatter?t.inputFormatter.map(function(t,e){return t?t(r[e]):r[e]}):r},a.prototype._formatOutput=function(t){var e=this.options.subscription;return e&&e.outputFormatter&&t?e.outputFormatter(t):t},a.prototype._toPayload=function(t){var e=[];if(this.callback=this._extractCallback(t)||s,this.subscriptionMethod||(this.subscriptionMethod=t.shift(),this.options.subscription.subscriptionName&&(this.subscriptionMethod=this.options.subscription.subscriptionName)),this.arguments||(this.arguments=this._formatInput(t),this._validateArgs(this.arguments),t=[]),e.push(this.subscriptionMethod),e=e.concat(this.arguments),t.length)throw new Error("Only a callback is allowed as parameter on an already instantiated subscription.");return{method:this.options.type+"_subscribe",params:e}},a.prototype.unsubscribe=function(t){this.options.requestManager.removeSubscription(this.id,t),this.id=null,this.lastBlock=null,this.removeAllListeners()},a.prototype.subscribe=function(){var r=this,t=Array.prototype.slice.call(arguments),o=this._toPayload(t);return o&&(this.options.requestManager.provider?this.options.requestManager.provider.on?(this.lastBlock&&this.options.params&&"object"==typeof this.options.params&&(o.params[1]=this.options.params,o.params[1].fromBlock=i.inputBlockNumberFormatter(this.lastBlock+1)),this.id&&this.unsubscribe(),this.options.params=o.params[1],"logs"===o.params[0]&&o.params[1]&&"object"==typeof o.params[1]&&o.params[1].hasOwnProperty("fromBlock")&&isFinite(o.params[1].fromBlock)&&(t=Object.assign({},o.params[1]),this.options.requestManager.send({method:"eth_getLogs",params:[t]},function(t,e){t?setTimeout(function(){r.callback(t,null,r),r.emit("error",t)},0):e.forEach(function(t){t=r._formatOutput(t);r.callback(null,t,r),r.emit("data",t)})})),"object"==typeof o.params[1]&&delete o.params[1].fromBlock,this.options.requestManager.send(o,function(t,e){!t&&e?(r.id=e,r.method=o.params[0],r.options.requestManager.addSubscription(r,function(t,e){t?(r.callback(t,!1,r),r.emit("error",t)):(e=!Array.isArray(e)?[e]:e).forEach(function(t){t=r._formatOutput(t);if(r.lastBlock=t&&"object"==typeof t?t.blockNumber:null,"function"==typeof r.options.subscription.subscriptionHandler)return r.options.subscription.subscriptionHandler.call(r,t);r.emit("data",t),r.callback(null,t,r)})}),r.emit("connected",e)):setTimeout(function(){r.callback(t,!1,r),r.emit("error",t)},0)})):setTimeout(function(){var t=new Error("The current provider doesn't support subscriptions: "+r.options.requestManager.provider.constructor.name);r.callback(t,null,r),r.emit("error",t)},0):setTimeout(function(){var t=new Error("No provider set.");r.callback(t,null,r),r.emit("error",t)},0)),this},a.prototype.resubscribe=function(){this.options.requestManager.removeSubscription(this.id),this.id=null,this.subscribe(this.callback)},t.exports=a},c044:function(t,e,r){"use strict";var o=r("490f"),r=r("68e2");t.exports={errors:o,formatters:r}},c063:function(t,e,r){const o=r("166e"),n=r("c23d");t.exports={packageInit:(r,t)=>{if(t=Array.prototype.slice.call(t),!r)throw new Error('You need to instantiate using the "new" keyword.');Object.defineProperty(r,"currentProvider",{get:()=>r._provider,set:t=>r.setProvider(t),enumerable:!0,configurable:!0}),t[0]&&t[0]._requestManager?r._requestManager=t[0]._requestManager:r._requestManager=new o.Manager(t[0],t[1]),r.givenProvider=o.Manager.givenProvider,r.providers=o.Manager.providers,r._provider=r._requestManager.provider,r.setProvider||(r.setProvider=(t,e)=>(r._requestManager.setProvider(t,e),r._provider=r._requestManager.provider,!0)),r.setRequestManager=t=>{r._requestManager=t,r._provider=t.provider},r.BatchRequest=o.BatchManager.bind(null,r._requestManager),r.extend=n(r)},addProviders:t=>{t.givenProvider=o.Manager.givenProvider,t.providers=o.Manager.providers}}},c23d:function(t,e,r){"use strict";var o=r("c044").formatters,n=r("7789"),i=r("5ba3");t.exports=function(r){function t(t){var e=t.property?(r[t.property]||(r[t.property]={}),r[t.property]):r;return t.methods&&t.methods.forEach(function(t){(t=!(t instanceof n)?new n(t):t).attachToObject(e),t.setRequestManager(r._requestManager)}),r}return t.formatters=o,t.utils=i,t.Method=n,t}},c3e6:function(t,e,r){"use strict";function o(t){this.name=t.name,this.type=t.type,this.subscriptions=t.subscriptions||{},this.requestManager=null}var n=r("b287");o.prototype.setRequestManager=function(t){this.requestManager=t},o.prototype.attachToObject=function(t){var e=this.buildCall(),r=this.name.split(".");1<r.length?(t[r[0]]=t[r[0]]||{},t[r[0]][r[1]]=e):t[r[0]]=e},o.prototype.buildCall=function(){var e=this;return function(){e.subscriptions[arguments[0]];var t=new n({subscription:e.subscriptions[arguments[0]]||{},requestManager:e.requestManager,type:e.type});return t.subscribe.apply(t,arguments)}},t.exports={subscriptions:o,subscription:n}}}]);