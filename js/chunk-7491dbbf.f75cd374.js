(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7491dbbf"],{64300:function(t,e,n){"use strict";n.r(e),n.d(e,"Animation",function(){return et}),n.d(e,"AnimationState",function(){return Q}),n.d(e,"AnimationStateAdapter",function(){return Ot}),n.d(e,"AnimationStateData",function(){return Bt}),n.d(e,"AtlasAttachmentLoader",function(){return Dt}),n.d(e,"Attachment",function(){return m}),n.d(e,"AttachmentTimeline",function(){return ht}),n.d(e,"Bone",function(){return Lt}),n.d(e,"BoneData",function(){return Wt}),n.d(e,"BoundingBoxAttachment",function(){return g}),n.d(e,"ClippingAttachment",function(){return v}),n.d(e,"ColorTimeline",function(){return ot}),n.d(e,"ConstraintData",function(){return qt}),n.d(e,"CurveTimeline",function(){return Z}),n.d(e,"DeformTimeline",function(){return lt}),n.d(e,"DrawOrderTimeline",function(){return ut}),n.d(e,"Event",function(){return Ut}),n.d(e,"EventData",function(){return Ht}),n.d(e,"EventQueue",function(){return K}),n.d(e,"EventTimeline",function(){return ct}),n.d(e,"EventType",function(){return F}),n.d(e,"IkConstraint",function(){return jt}),n.d(e,"IkConstraintData",function(){return Gt}),n.d(e,"IkConstraintTimeline",function(){return dt}),n.d(e,"JitterEffect",function(){return w}),n.d(e,"MeshAttachment",function(){return y}),n.d(e,"PathAttachment",function(){return D}),n.d(e,"PathConstraint",function(){return re}),n.d(e,"PathConstraintData",function(){return Zt}),n.d(e,"PathConstraintMixTimeline",function(){return gt}),n.d(e,"PathConstraintPositionTimeline",function(){return pt}),n.d(e,"PathConstraintSpacingTimeline",function(){return mt}),n.d(e,"PointAttachment",function(){return E}),n.d(e,"RegionAttachment",function(){return x}),n.d(e,"RotateTimeline",function(){return nt}),n.d(e,"ScaleTimeline",function(){return rt}),n.d(e,"ShearTimeline",function(){return it}),n.d(e,"Skeleton",function(){return se}),n.d(e,"SkeletonBinary",function(){return fe}),n.d(e,"SkeletonBounds",function(){return ge}),n.d(e,"SkeletonData",function(){return he}),n.d(e,"SkeletonJson",function(){return ve}),n.d(e,"Skin",function(){return de}),n.d(e,"SkinEntry",function(){return ue}),n.d(e,"Slot",function(){return ie}),n.d(e,"SlotData",function(){return le}),n.d(e,"SpacingMode",function(){return _t}),n.d(e,"Spine",function(){return Ee}),n.d(e,"SwirlEffect",function(){return b}),n.d(e,"TimelineType",function(){return s}),n.d(e,"TrackEntry",function(){return J}),n.d(e,"TransformConstraint",function(){return oe}),n.d(e,"TransformConstraintData",function(){return ce}),n.d(e,"TransformConstraintTimeline",function(){return ft}),n.d(e,"TranslateTimeline",function(){return at}),n.d(e,"TwoColorTimeline",function(){return st}),n.d(e,"VertexAttachment",function(){return O});var tt=n("8eee"),a=n("a47c"),r=n("0a92"),i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s,h,l,c,u,d,f,p,m=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t},O=(o(P,p=m),P.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},P.prototype.computeWorldVertices=function(t,e,n,a,r,i){n=r+(n>>1)*i;var o=t.bone.skeleton,s=t.deform,h=this.vertices,l=this.bones;if(null!=l){for(var c=0,u=0,d=0;d<e;d+=2){var f=l[c];c+=f+1,u+=f}var p=o.bones;if(0==s.length)for(V=r,M=3*u;V<n;V+=i){var m=0,g=0,f=l[c++];for(f+=c;c<f;c++,M+=3){var v=p[l[c]].matrix,y=h[M],E=h[M+1],x=h[M+2];m+=(y*v.a+E*v.c+v.tx)*x,g+=(y*v.b+E*v.d+v.ty)*x}a[V]=m,a[V+1]=g}else for(var w=s,b=(V=r,M=3*u,u<<1);V<n;V+=i){for(g=m=0,f=l[c++],f+=c;c<f;c++,M+=3,b+=2)v=p[l[c]].matrix,y=h[M]+w[b],E=h[M+1]+w[b+1],x=h[M+2],m+=(y*v.a+E*v.c+v.tx)*x,g+=(y*v.b+E*v.d+v.ty)*x;a[V]=m,a[V+1]=g}}else{0<s.length&&(h=s);for(var v,S=(v=t.bone.matrix).tx,I=v.ty,T=v.a,M=v.c,A=v.b,R=v.d,C=e,V=r;V<n;C+=2,V+=i){var y=h[C],E=h[C+1];a[V]=y*T+E*M+S,a[V+1]=y*A+E*R+I}}},P.prototype.copyTo=function(t){null!=this.bones?(t.bones=new Array(this.bones.length),tt.p.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,null!=this.vertices?(t.vertices=tt.p.newFloatArray(this.vertices.length),tt.p.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment},P.nextID=0,P),g=(o(k,f=O),k.prototype.copy=function(){var t=new k(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},k),v=(o(V,d=O),V.prototype.copy=function(){var t=new V(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},V),y=(o(C,u=O),C.prototype.getParentMesh=function(){return this.parentMesh},C.prototype.setParentMesh=function(t){null!=(this.parentMesh=t)&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},C.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var t=new C(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),tt.p.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),tt.p.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,null!=this.edges&&(t.edges=new Array(this.edges.length),tt.p.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},C.prototype.newLinkedMesh=function(){var t=new C(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t},C),D=(o(R,c=O),R.prototype.copy=function(){var t=new R(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),tt.p.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},R),E=(o(A,l=O),A.prototype.computeWorldPosition=function(t,e){var n=t.matrix;return e.x=this.x*n.a+this.y*n.c+t.worldX,e.y=this.x*n.b+this.y*n.d+t.worldY,e},A.prototype.computeWorldRotation=function(t){var e=t.matrix,n=tt.e.cosDeg(this.rotation),a=tt.e.sinDeg(this.rotation),t=n*e.a+a*e.c,e=n*e.b+a*e.d;return Math.atan2(e,t)*tt.e.radDeg},A.prototype.copy=function(){var t=new A(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},A),x=(o(M,h=m),M.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,a=-this.height/2*this.scaleY+this.region.offsetY*e,r=n+this.region.width*t,i=a+this.region.height*e,o=this.rotation*Math.PI/180,s=Math.cos(o),h=Math.sin(o),t=n*s+this.x,e=n*h,o=a*s+this.y,n=a*h,a=r*s+this.x,r=r*h,s=i*s+this.y,i=i*h,h=this.offset;h[M.OX1]=t-n,h[M.OY1]=o+e,h[M.OX2]=t-i,h[M.OY2]=s+e,h[M.OX3]=a-i,h[M.OY3]=s+r,h[M.OX4]=a-n,h[M.OY4]=o+r},M.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},M.prototype.computeWorldVertices=function(t,e,n,a){var r=this.offset,i=t.matrix,o=i.tx,s=i.ty,h=i.a,l=i.c,c=i.b,u=i.d,t=r[M.OX1],i=r[M.OY1];e[n]=t*h+i*l+o,e[n+1]=t*c+i*u+s,t=r[M.OX2],i=r[M.OY2],e[n+=a]=t*h+i*l+o,e[n+1]=t*c+i*u+s,t=r[M.OX3],i=r[M.OY3],e[n+=a]=t*h+i*l+o,e[n+1]=t*c+i*u+s,t=r[M.OX4],i=r[M.OY4],e[n+=a]=t*h+i*l+o,e[n+1]=t*c+i*u+s},M.prototype.copy=function(){var t=new M(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,tt.p.arrayCopy(this.uvs,0,t.uvs,0,8),tt.p.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},M.OX1=0,M.OY1=1,M.OX2=2,M.OY2=3,M.OX3=4,M.OY3=5,M.OX4=6,M.OY4=7,M.X1=0,M.Y1=1,M.C1R=2,M.C1G=3,M.C1B=4,M.C1A=5,M.U1=6,M.V1=7,M.X2=8,M.Y2=9,M.C2R=10,M.C2G=11,M.C2B=12,M.C2A=13,M.U2=14,M.V2=15,M.X3=16,M.Y3=17,M.C3R=18,M.C3G=19,M.C3B=20,M.C3A=21,M.U3=22,M.V3=23,M.X4=24,M.Y4=25,M.C4R=26,M.C4G=27,M.C4B=28,M.C4A=29,M.U4=30,M.V4=31,M),w=(T.prototype.begin=function(t){},T.prototype.transform=function(t,e,n,a){t.x+=tt.e.randomTriangular(-this.jitterX,this.jitterY),t.y+=tt.e.randomTriangular(-this.jitterX,this.jitterY)},T.prototype.end=function(){},T),b=(I.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},I.prototype.transform=function(t,e,n,a){var r=this.angle*tt.e.degreesToRadians,i=t.x-this.worldX,o=t.y-this.worldY,s=Math.sqrt(i*i+o*o);s<this.radius&&(r=I.interpolation.apply(0,r,(this.radius-s)/this.radius),s=Math.cos(r),r=Math.sin(r),t.x=s*i-r*o+this.worldX,t.y=r*i+s*o+this.worldY)},I.prototype.end=function(){},I.interpolation=new tt.j(2),I),et=(S.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},S.prototype.apply=function(t,e,n,a,r,i,o,s){if(null==t)throw new Error("skeleton cannot be null.");a&&0!=this.duration&&(n%=this.duration,0<e&&(e%=this.duration));for(var h=this.timelines,l=0,c=h.length;l<c;l++)h[l].apply(t,e,n,r,i,o,s)},S.binarySearch=function(t,e,n){var a=0,r=t.length/(n=void 0===n?1:n)-2;if(0==r)return n;for(var i=r>>>1;;){if(t[(i+1)*n]<=e?a=i+1:r=i,a==r)return(a+1)*n;i=a+r>>>1}},S.linearSearch=function(t,e,n){for(var a=0,r=t.length-n;a<=r;a+=n)if(t[a]>e)return a;return-1},S);function S(t,e,n){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var a=0;a<e.length;a++)this.timelineIds[e[a].getPropertyId()]=!0;this.duration=n}function I(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}function T(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}function M(t){t=h.call(this,t)||this;return t.type=tt.a.Region,t.x=0,t.y=0,t.scaleX=1,t.scaleY=1,t.rotation=0,t.width=0,t.height=0,t.color=new tt.c(1,1,1,1),t.offset=tt.p.newFloatArray(8),t.uvs=tt.p.newFloatArray(8),t.tempColor=new tt.c(1,1,1,1),t}function A(t){t=l.call(this,t)||this;return t.type=tt.a.Point,t.color=new tt.c(.38,.94,0,1),t}function R(t){t=c.call(this,t)||this;return t.type=tt.a.Path,t.closed=!1,t.constantSpeed=!1,t.color=new tt.c(1,1,1,1),t}function C(t){t=u.call(this,t)||this;return t.type=tt.a.Mesh,t.color=new tt.c(1,1,1,1),t.tempColor=new tt.c(0,0,0,0),t}function V(t){t=d.call(this,t)||this;return t.type=tt.a.Clipping,t.color=new tt.c(.2275,.2275,.8078,1),t}function k(t){t=f.call(this,t)||this;return t.type=tt.a.BoundingBox,t.color=new tt.c(1,1,1,1),t}function P(t){t=p.call(this,t)||this;return t.id=(65535&P.nextID++)<<11,t.worldVerticesLength=0,t.deformAttachment=t}(n=s=s||{})[n.rotate=0]="rotate",n[n.translate=1]="translate",n[n.scale=2]="scale",n[n.shear=3]="shear",n[n.attachment=4]="attachment",n[n.color=5]="color",n[n.deform=6]="deform",n[n.event=7]="event",n[n.drawOrder=8]="drawOrder",n[n.ikConstraint=9]="ikConstraint",n[n.transformConstraint=10]="transformConstraint",n[n.pathConstraintPosition=11]="pathConstraintPosition",n[n.pathConstraintSpacing=12]="pathConstraintSpacing",n[n.pathConstraintMix=13]="pathConstraintMix",n[n.twoColor=14]="twoColor";var F,N,_,Y,X,B,L,W,q,U,H,j,G,Z=(Nt.prototype.getFrameCount=function(){return this.curves.length/Nt.BEZIER_SIZE+1},Nt.prototype.setLinear=function(t){this.curves[t*Nt.BEZIER_SIZE]=Nt.LINEAR},Nt.prototype.setStepped=function(t){this.curves[t*Nt.BEZIER_SIZE]=Nt.STEPPED},Nt.prototype.getCurveType=function(t){t*=Nt.BEZIER_SIZE;if(t==this.curves.length)return Nt.LINEAR;t=this.curves[t];return t==Nt.LINEAR?Nt.LINEAR:t==Nt.STEPPED?Nt.STEPPED:Nt.BEZIER},Nt.prototype.setCurve=function(t,e,n,a,r){var i=.03*(2*-e+a),o=.03*(2*-n+r),s=.006*(3*(e-a)+1),h=.006*(3*(n-r)+1),l=2*i+s,c=2*o+h,u=.3*e+i+.16666667*s,d=.3*n+o+.16666667*h,f=t*Nt.BEZIER_SIZE,p=this.curves;p[f++]=Nt.BEZIER;for(var m=u,g=d,v=f+Nt.BEZIER_SIZE-1;f<v;f+=2)p[f]=m,p[f+1]=g,u+=l,d+=c,l+=s,c+=h,m+=u,g+=d},Nt.prototype.getCurvePercent=function(t,e){e=tt.e.clamp(e,0,1);var n=this.curves,a=t*Nt.BEZIER_SIZE,t=n[a];if(t==Nt.LINEAR)return e;if(t==Nt.STEPPED)return 0;for(var r=0,i=++a,o=a+Nt.BEZIER_SIZE-1;a<o;a+=2)if(e<=(r=n[a])){var s=void 0,h=void 0;return(h=a==i?s=0:(s=n[a-2],n[a-1]))+(n[a+1]-h)*(e-s)/(r-s)}t=n[a-1];return t+(1-t)*(e-r)/(1-r)},Nt.LINEAR=0,Nt.STEPPED=1,Nt.BEZIER=2,Nt.BEZIER_SIZE=19,Nt),nt=(o(Ft,G=Z),Ft.prototype.getPropertyId=function(){return(s.rotate<<24)+this.boneIndex},Ft.prototype.setFrame=function(t,e,n){this.frames[t<<=1]=e,this.frames[t+Ft.ROTATION]=n},Ft.prototype.apply=function(t,e,n,a,r,i,o){var s=this.frames,h=t.bones[this.boneIndex];if(h.active)if(n<s[0])switch(i){case tt.f.setup:return void(h.rotation=h.data.rotation);case tt.f.first:var l=h.data.rotation-h.rotation;h.rotation+=(l-360*(16384-(16384.499999999996-l/360|0)))*r}else if(n>=s[s.length-Ft.ENTRIES]){var c=s[s.length+Ft.PREV_ROTATION];switch(i){case tt.f.setup:h.rotation=h.data.rotation+c*r;break;case tt.f.first:case tt.f.replace:c+=h.data.rotation-h.rotation,c-=360*(16384-(16384.499999999996-c/360|0));case tt.f.add:h.rotation+=c*r}}else{var u=et.binarySearch(s,n,Ft.ENTRIES),d=s[u+Ft.PREV_ROTATION],t=s[u],t=this.getCurvePercent((u>>1)-1,1-(n-t)/(s[u+Ft.PREV_TIME]-t)),f=d+((f=s[u+Ft.ROTATION]-d)-360*(16384-(16384.499999999996-f/360|0)))*t;switch(i){case tt.f.setup:h.rotation=h.data.rotation+(f-360*(16384-(16384.499999999996-f/360|0)))*r;break;case tt.f.first:case tt.f.replace:f+=h.data.rotation-h.rotation;case tt.f.add:h.rotation+=(f-360*(16384-(16384.499999999996-f/360|0)))*r}}},Ft.ENTRIES=2,Ft.PREV_TIME=-2,Ft.PREV_ROTATION=-1,Ft.ROTATION=1,Ft),at=(o(Pt,j=Z),Pt.prototype.getPropertyId=function(){return(s.translate<<24)+this.boneIndex},Pt.prototype.setFrame=function(t,e,n,a){this.frames[t*=Pt.ENTRIES]=e,this.frames[t+Pt.X]=n,this.frames[t+Pt.Y]=a},Pt.prototype.apply=function(t,e,n,a,r,i,o){var s=this.frames,h=t.bones[this.boneIndex];if(h.active)if(n<s[0])switch(i){case tt.f.setup:return h.x=h.data.x,void(h.y=h.data.y);case tt.f.first:h.x+=(h.data.x-h.x)*r,h.y+=(h.data.y-h.y)*r}else{var l,c=0,u=0;switch(n>=s[s.length-Pt.ENTRIES]?(c=s[s.length+Pt.PREV_X],u=s[s.length+Pt.PREV_Y]):(c=s[(l=et.binarySearch(s,n,Pt.ENTRIES))+Pt.PREV_X],u=s[l+Pt.PREV_Y],t=s[l],t=this.getCurvePercent(l/Pt.ENTRIES-1,1-(n-t)/(s[l+Pt.PREV_TIME]-t)),c+=(s[l+Pt.X]-c)*t,u+=(s[l+Pt.Y]-u)*t),i){case tt.f.setup:h.x=h.data.x+c*r,h.y=h.data.y+u*r;break;case tt.f.first:case tt.f.replace:h.x+=(h.data.x+c-h.x)*r,h.y+=(h.data.y+u-h.y)*r;break;case tt.f.add:h.x+=c*r,h.y+=u*r}}},Pt.ENTRIES=3,Pt.PREV_TIME=-3,Pt.PREV_X=-2,Pt.PREV_Y=-1,Pt.X=1,Pt.Y=2,Pt),rt=(o(kt,H=at),kt.prototype.getPropertyId=function(){return(s.scale<<24)+this.boneIndex},kt.prototype.apply=function(t,e,n,a,r,i,o){var s=this.frames,h=t.bones[this.boneIndex];if(h.active)if(n<s[0])switch(i){case tt.f.setup:return h.scaleX=h.data.scaleX,void(h.scaleY=h.data.scaleY);case tt.f.first:h.scaleX+=(h.data.scaleX-h.scaleX)*r,h.scaleY+=(h.data.scaleY-h.scaleY)*r}else{var l,c=0,u=0;if(u=n>=s[s.length-kt.ENTRIES]?(c=s[s.length+kt.PREV_X]*h.data.scaleX,s[s.length+kt.PREV_Y]*h.data.scaleY):(c=s[(l=et.binarySearch(s,n,kt.ENTRIES))+kt.PREV_X],u=s[l+kt.PREV_Y],t=s[l],t=this.getCurvePercent(l/kt.ENTRIES-1,1-(n-t)/(s[l+kt.PREV_TIME]-t)),c=(c+(s[l+kt.X]-c)*t)*h.data.scaleX,(u+(s[l+kt.Y]-u)*t)*h.data.scaleY),1==r)i==tt.f.add?(h.scaleX+=c-h.data.scaleX,h.scaleY+=u-h.data.scaleY):(h.scaleX=c,h.scaleY=u);else{var d=0,f=0;if(o==tt.g.mixOut)switch(i){case tt.f.setup:d=h.data.scaleX,f=h.data.scaleY,h.scaleX=d+(Math.abs(c)*tt.e.signum(d)-d)*r,h.scaleY=f+(Math.abs(u)*tt.e.signum(f)-f)*r;break;case tt.f.first:case tt.f.replace:d=h.scaleX,f=h.scaleY,h.scaleX=d+(Math.abs(c)*tt.e.signum(d)-d)*r,h.scaleY=f+(Math.abs(u)*tt.e.signum(f)-f)*r;break;case tt.f.add:d=h.scaleX,f=h.scaleY,h.scaleX=d+(Math.abs(c)*tt.e.signum(d)-h.data.scaleX)*r,h.scaleY=f+(Math.abs(u)*tt.e.signum(f)-h.data.scaleY)*r}else switch(i){case tt.f.setup:d=Math.abs(h.data.scaleX)*tt.e.signum(c),f=Math.abs(h.data.scaleY)*tt.e.signum(u),h.scaleX=d+(c-d)*r,h.scaleY=f+(u-f)*r;break;case tt.f.first:case tt.f.replace:d=Math.abs(h.scaleX)*tt.e.signum(c),f=Math.abs(h.scaleY)*tt.e.signum(u),h.scaleX=d+(c-d)*r,h.scaleY=f+(u-f)*r;break;case tt.f.add:d=tt.e.signum(c),f=tt.e.signum(u),h.scaleX=Math.abs(h.scaleX)*d+(c-Math.abs(h.data.scaleX)*d)*r,h.scaleY=Math.abs(h.scaleY)*f+(u-Math.abs(h.data.scaleY)*f)*r}}}},kt),it=(o(Vt,U=at),Vt.prototype.getPropertyId=function(){return(s.shear<<24)+this.boneIndex},Vt.prototype.apply=function(t,e,n,a,r,i,o){var s=this.frames,h=t.bones[this.boneIndex];if(h.active)if(n<s[0])switch(i){case tt.f.setup:return h.shearX=h.data.shearX,void(h.shearY=h.data.shearY);case tt.f.first:h.shearX+=(h.data.shearX-h.shearX)*r,h.shearY+=(h.data.shearY-h.shearY)*r}else{var l,c=0,u=0;switch(n>=s[s.length-Vt.ENTRIES]?(c=s[s.length+Vt.PREV_X],u=s[s.length+Vt.PREV_Y]):(c=s[(l=et.binarySearch(s,n,Vt.ENTRIES))+Vt.PREV_X],u=s[l+Vt.PREV_Y],t=s[l],t=this.getCurvePercent(l/Vt.ENTRIES-1,1-(n-t)/(s[l+Vt.PREV_TIME]-t)),c+=(s[l+Vt.X]-c)*t,u+=(s[l+Vt.Y]-u)*t),i){case tt.f.setup:h.shearX=h.data.shearX+c*r,h.shearY=h.data.shearY+u*r;break;case tt.f.first:case tt.f.replace:h.shearX+=(h.data.shearX+c-h.shearX)*r,h.shearY+=(h.data.shearY+u-h.shearY)*r;break;case tt.f.add:h.shearX+=c*r,h.shearY+=u*r}}},Vt),ot=(o(Ct,q=Z),Ct.prototype.getPropertyId=function(){return(s.color<<24)+this.slotIndex},Ct.prototype.setFrame=function(t,e,n,a,r,i){this.frames[t*=Ct.ENTRIES]=e,this.frames[t+Ct.R]=n,this.frames[t+Ct.G]=a,this.frames[t+Ct.B]=r,this.frames[t+Ct.A]=i},Ct.prototype.apply=function(t,e,n,a,r,i,o){var s=t.slots[this.slotIndex];if(s.bone.active){var h=this.frames;if(n<h[0])switch(i){case tt.f.setup:return void s.color.setFromColor(s.data.color);case tt.f.first:var l=s.color,c=s.data.color;l.add((c.r-l.r)*r,(c.g-l.g)*r,(c.b-l.b)*r,(c.a-l.a)*r)}else{var u,d=0,f=0,p=0,m=0;n>=h[h.length-Ct.ENTRIES]?(d=h[(u=h.length)+Ct.PREV_R],f=h[u+Ct.PREV_G],p=h[u+Ct.PREV_B],m=h[u+Ct.PREV_A]):(d=h[(t=et.binarySearch(h,n,Ct.ENTRIES))+Ct.PREV_R],f=h[t+Ct.PREV_G],p=h[t+Ct.PREV_B],m=h[t+Ct.PREV_A],u=h[t],u=this.getCurvePercent(t/Ct.ENTRIES-1,1-(n-u)/(h[t+Ct.PREV_TIME]-u)),d+=(h[t+Ct.R]-d)*u,f+=(h[t+Ct.G]-f)*u,p+=(h[t+Ct.B]-p)*u,m+=(h[t+Ct.A]-m)*u),1==r?s.color.set(d,f,p,m):(l=s.color,i==tt.f.setup&&l.setFromColor(s.data.color),l.add((d-l.r)*r,(f-l.g)*r,(p-l.b)*r,(m-l.a)*r))}}},Ct.ENTRIES=5,Ct.PREV_TIME=-5,Ct.PREV_R=-4,Ct.PREV_G=-3,Ct.PREV_B=-2,Ct.PREV_A=-1,Ct.R=1,Ct.G=2,Ct.B=3,Ct.A=4,Ct),st=(o(Rt,W=Z),Rt.prototype.getPropertyId=function(){return(s.twoColor<<24)+this.slotIndex},Rt.prototype.setFrame=function(t,e,n,a,r,i,o,s,h){this.frames[t*=Rt.ENTRIES]=e,this.frames[t+Rt.R]=n,this.frames[t+Rt.G]=a,this.frames[t+Rt.B]=r,this.frames[t+Rt.A]=i,this.frames[t+Rt.R2]=o,this.frames[t+Rt.G2]=s,this.frames[t+Rt.B2]=h},Rt.prototype.apply=function(t,e,n,a,r,i,o){var s=t.slots[this.slotIndex];if(s.bone.active){var h=this.frames;if(n<h[0])switch(i){case tt.f.setup:return s.color.setFromColor(s.data.color),void s.darkColor.setFromColor(s.data.darkColor);case tt.f.first:var l=s.color,c=s.darkColor,u=s.data.color,d=s.data.darkColor;l.add((u.r-l.r)*r,(u.g-l.g)*r,(u.b-l.b)*r,(u.a-l.a)*r),c.add((d.r-c.r)*r,(d.g-c.g)*r,(d.b-c.b)*r,0)}else{var f,p=0,m=0,g=0,v=0,y=0,E=0,x=0;n>=h[h.length-Rt.ENTRIES]?(p=h[(f=h.length)+Rt.PREV_R],m=h[f+Rt.PREV_G],g=h[f+Rt.PREV_B],v=h[f+Rt.PREV_A],y=h[f+Rt.PREV_R2],E=h[f+Rt.PREV_G2],x=h[f+Rt.PREV_B2]):(p=h[(t=et.binarySearch(h,n,Rt.ENTRIES))+Rt.PREV_R],m=h[t+Rt.PREV_G],g=h[t+Rt.PREV_B],v=h[t+Rt.PREV_A],y=h[t+Rt.PREV_R2],E=h[t+Rt.PREV_G2],x=h[t+Rt.PREV_B2],f=h[t],f=this.getCurvePercent(t/Rt.ENTRIES-1,1-(n-f)/(h[t+Rt.PREV_TIME]-f)),p+=(h[t+Rt.R]-p)*f,m+=(h[t+Rt.G]-m)*f,g+=(h[t+Rt.B]-g)*f,v+=(h[t+Rt.A]-v)*f,y+=(h[t+Rt.R2]-y)*f,E+=(h[t+Rt.G2]-E)*f,x+=(h[t+Rt.B2]-x)*f),1==r?(s.color.set(p,m,g,v),s.darkColor.set(y,E,x,1)):(l=s.color,c=s.darkColor,i==tt.f.setup&&(l.setFromColor(s.data.color),c.setFromColor(s.data.darkColor)),l.add((p-l.r)*r,(m-l.g)*r,(g-l.b)*r,(v-l.a)*r),c.add((y-c.r)*r,(E-c.g)*r,(x-c.b)*r,0))}}},Rt.ENTRIES=8,Rt.PREV_TIME=-8,Rt.PREV_R=-7,Rt.PREV_G=-6,Rt.PREV_B=-5,Rt.PREV_A=-4,Rt.PREV_R2=-3,Rt.PREV_G2=-2,Rt.PREV_B2=-1,Rt.R=1,Rt.G=2,Rt.B=3,Rt.A=4,Rt.R2=5,Rt.G2=6,Rt.B2=7,Rt),ht=(At.prototype.getPropertyId=function(){return(s.attachment<<24)+this.slotIndex},At.prototype.getFrameCount=function(){return this.frames.length},At.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},At.prototype.apply=function(t,e,n,a,r,i,o){var s,h=t.slots[this.slotIndex];h.bone.active&&(o!=tt.g.mixOut?n<(s=this.frames)[0]?i!=tt.f.setup&&i!=tt.f.first||this.setAttachment(t,h,h.data.attachmentName):(o=0,o=n>=s[s.length-1]?s.length-1:et.binarySearch(s,n,1)-1,o=this.attachmentNames[o],t.slots[this.slotIndex].setAttachment(null==o?null:t.getAttachment(this.slotIndex,o))):i==tt.f.setup&&this.setAttachment(t,h,h.data.attachmentName))},At.prototype.setAttachment=function(t,e,n){e.setAttachment(null==n?null:t.getAttachment(this.slotIndex,n))},At),z=null,lt=(o(Mt,L=Z),Mt.prototype.getPropertyId=function(){return(s.deform<<27)+ +this.attachment.id+this.slotIndex},Mt.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},Mt.prototype.apply=function(t,e,n,a,r,i,o){var s=t.slots[this.slotIndex];if(s.bone.active){var h=s.getAttachment();if(h instanceof O&&h.deformAttachment==this.attachment){var l=s.deform;0==l.length&&(i=tt.f.setup);var c=this.frameVertices,u=c[0].length,t=this.frames;if(n<t[0]){var d=h;switch(i){case tt.f.setup:return void(l.length=0);case tt.f.first:if(1==r){l.length=0;break}var f=tt.p.setArraySize(l,u);if(null==d.bones)for(var p=d.vertices,m=0;m<u;m++)f[m]+=(p[m]-f[m])*r;else for(r=1-r,m=0;m<u;m++)f[m]*=r}}else{var g=tt.p.setArraySize(l,u);if(n>=t[t.length-1]){var v=c[t.length-1];if(1==r)if(i==tt.f.add)if(null==(d=h).bones)for(var p=d.vertices,y=0;y<u;y++)g[y]+=v[y]-p[y];else for(var E=0;E<u;E++)g[E]+=v[E];else tt.p.arrayCopy(v,0,g,0,u);else switch(i){case tt.f.setup:if(null==h.bones){p=h.vertices;for(var x=0;x<u;x++){var w=p[x];g[x]=w+(v[x]-w)*r}}else for(var b=0;b<u;b++)g[b]=v[b]*r;break;case tt.f.first:case tt.f.replace:for(var S=0;S<u;S++)g[S]+=(v[S]-g[S])*r;break;case tt.f.add:if(null==(d=h).bones){p=d.vertices;for(var I=0;I<u;I++)g[I]+=(v[I]-p[I])*r}else for(var T=0;T<u;T++)g[T]+=v[T]*r}}else{var s=et.binarySearch(t,n),M=c[s-1],A=c[s],c=t[s],R=this.getCurvePercent(s-1,1-(n-c)/(t[s-1]-c));if(1==r)if(i==tt.f.add)if(null==(d=h).bones){p=d.vertices;for(var C=0;C<u;C++){var V=M[C];g[C]+=V+(A[C]-V)*R-p[C]}}else for(var k=0;k<u;k++)V=M[k],g[k]+=V+(A[k]-V)*R;else for(var P=0;P<u;P++)V=M[P],g[P]=V+(A[P]-V)*R;else switch(i){case tt.f.setup:if(null==h.bones){p=h.vertices;for(var F=0;F<u;F++)V=M[F],w=p[F],g[F]=w+(V+(A[F]-V)*R-w)*r}else for(var N=0;N<u;N++)V=M[N],g[N]=(V+(A[N]-V)*R)*r;break;case tt.f.first:case tt.f.replace:for(var _=0;_<u;_++)V=M[_],g[_]+=(V+(A[_]-V)*R-g[_])*r;break;case tt.f.add:if(null==(d=h).bones){p=d.vertices;for(var Y=0;Y<u;Y++)V=M[Y],g[Y]+=(V+(A[Y]-V)*R-p[Y])*r}else for(var X=0;X<u;X++)V=M[X],g[X]+=(V+(A[X]-V)*R)*r}}}}}},Mt),ct=(Tt.prototype.getPropertyId=function(){return s.event<<24},Tt.prototype.getFrameCount=function(){return this.frames.length},Tt.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},Tt.prototype.apply=function(t,e,n,a,r,i,o){if(null!=a){var s=this.frames,h=this.frames.length;if(n<e)this.apply(t,e,Number.MAX_VALUE,a,r,i,o),e=-1;else if(e>=s[h-1])return;if(!(n<s[0])){var l=0;if(e<s[0])l=0;else for(var c=s[l=et.binarySearch(s,e)];0<l&&s[l-1]==c;)l--;for(;l<h&&n>=s[l];l++)a.push(this.events[l])}}},Tt),ut=(It.prototype.getPropertyId=function(){return s.drawOrder<<24},It.prototype.getFrameCount=function(){return this.frames.length},It.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},It.prototype.apply=function(t,e,n,a,r,i,o){var s=t.drawOrder,h=t.slots;if(o!=tt.g.mixOut||i!=tt.f.setup){o=this.frames;if(n<o[0])i!=tt.f.setup&&i!=tt.f.first||tt.p.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var n=n>=o[o.length-1]?o.length-1:et.binarySearch(o,n)-1,l=this.drawOrders[n];if(null==l)tt.p.arrayCopy(h,0,s,0,h.length);else for(var c=0,u=l.length;c<u;c++)s[c]=h[l[c]]}}else tt.p.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},It),dt=(o(St,B=Z),St.prototype.getPropertyId=function(){return(s.ikConstraint<<24)+this.ikConstraintIndex},St.prototype.setFrame=function(t,e,n,a,r,i,o){this.frames[t*=St.ENTRIES]=e,this.frames[t+St.MIX]=n,this.frames[t+St.SOFTNESS]=a,this.frames[t+St.BEND_DIRECTION]=r,this.frames[t+St.COMPRESS]=i?1:0,this.frames[t+St.STRETCH]=o?1:0},St.prototype.apply=function(t,e,n,a,r,i,o){var s,h,l,c=this.frames,u=t.ikConstraints[this.ikConstraintIndex];if(u.active)if(n<c[0])switch(i){case tt.f.setup:return u.mix=u.data.mix,u.softness=u.data.softness,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,void(u.stretch=u.data.stretch);case tt.f.first:u.mix+=(u.data.mix-u.mix)*r,u.softness+=(u.data.softness-u.softness)*r,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch}else n>=c[c.length-St.ENTRIES]?i==tt.f.setup?(u.mix=u.data.mix+(c[c.length+St.PREV_MIX]-u.data.mix)*r,u.softness=u.data.softness+(c[c.length+St.PREV_SOFTNESS]-u.data.softness)*r,o==tt.g.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=c[c.length+St.PREV_BEND_DIRECTION],u.compress=0!=c[c.length+St.PREV_COMPRESS],u.stretch=0!=c[c.length+St.PREV_STRETCH])):(u.mix+=(c[c.length+St.PREV_MIX]-u.mix)*r,u.softness+=(c[c.length+St.PREV_SOFTNESS]-u.softness)*r,o==tt.g.mixIn&&(u.bendDirection=c[c.length+St.PREV_BEND_DIRECTION],u.compress=0!=c[c.length+St.PREV_COMPRESS],u.stretch=0!=c[c.length+St.PREV_STRETCH])):(h=c[(s=et.binarySearch(c,n,St.ENTRIES))+St.PREV_MIX],l=c[s+St.PREV_SOFTNESS],t=c[s],t=this.getCurvePercent(s/St.ENTRIES-1,1-(n-t)/(c[s+St.PREV_TIME]-t)),i==tt.f.setup?(u.mix=u.data.mix+(h+(c[s+St.MIX]-h)*t-u.data.mix)*r,u.softness=u.data.softness+(l+(c[s+St.SOFTNESS]-l)*t-u.data.softness)*r,o==tt.g.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=c[s+St.PREV_BEND_DIRECTION],u.compress=0!=c[s+St.PREV_COMPRESS],u.stretch=0!=c[s+St.PREV_STRETCH])):(u.mix+=(h+(c[s+St.MIX]-h)*t-u.mix)*r,u.softness+=(l+(c[s+St.SOFTNESS]-l)*t-u.softness)*r,o==tt.g.mixIn&&(u.bendDirection=c[s+St.PREV_BEND_DIRECTION],u.compress=0!=c[s+St.PREV_COMPRESS],u.stretch=0!=c[s+St.PREV_STRETCH])))},St.ENTRIES=6,St.PREV_TIME=-6,St.PREV_MIX=-5,St.PREV_SOFTNESS=-4,St.PREV_BEND_DIRECTION=-3,St.PREV_COMPRESS=-2,St.PREV_STRETCH=-1,St.MIX=1,St.SOFTNESS=2,St.BEND_DIRECTION=3,St.COMPRESS=4,St.STRETCH=5,St),ft=(o(bt,X=Z),bt.prototype.getPropertyId=function(){return(s.transformConstraint<<24)+this.transformConstraintIndex},bt.prototype.setFrame=function(t,e,n,a,r,i){this.frames[t*=bt.ENTRIES]=e,this.frames[t+bt.ROTATE]=n,this.frames[t+bt.TRANSLATE]=a,this.frames[t+bt.SCALE]=r,this.frames[t+bt.SHEAR]=i},bt.prototype.apply=function(t,e,n,a,r,i,o){var s=this.frames,h=t.transformConstraints[this.transformConstraintIndex];if(h.active)if(n<s[0]){var l=h.data;switch(i){case tt.f.setup:return h.rotateMix=l.rotateMix,h.translateMix=l.translateMix,h.scaleMix=l.scaleMix,void(h.shearMix=l.shearMix);case tt.f.first:h.rotateMix+=(l.rotateMix-h.rotateMix)*r,h.translateMix+=(l.translateMix-h.translateMix)*r,h.scaleMix+=(l.scaleMix-h.scaleMix)*r,h.shearMix+=(l.shearMix-h.shearMix)*r}}else{var c,u=0,d=0,f=0,p=0;n>=s[s.length-bt.ENTRIES]?(u=s[(c=s.length)+bt.PREV_ROTATE],d=s[c+bt.PREV_TRANSLATE],f=s[c+bt.PREV_SCALE],p=s[c+bt.PREV_SHEAR]):(u=s[(t=et.binarySearch(s,n,bt.ENTRIES))+bt.PREV_ROTATE],d=s[t+bt.PREV_TRANSLATE],f=s[t+bt.PREV_SCALE],p=s[t+bt.PREV_SHEAR],c=s[t],c=this.getCurvePercent(t/bt.ENTRIES-1,1-(n-c)/(s[t+bt.PREV_TIME]-c)),u+=(s[t+bt.ROTATE]-u)*c,d+=(s[t+bt.TRANSLATE]-d)*c,f+=(s[t+bt.SCALE]-f)*c,p+=(s[t+bt.SHEAR]-p)*c),i==tt.f.setup?(l=h.data,h.rotateMix=l.rotateMix+(u-l.rotateMix)*r,h.translateMix=l.translateMix+(d-l.translateMix)*r,h.scaleMix=l.scaleMix+(f-l.scaleMix)*r,h.shearMix=l.shearMix+(p-l.shearMix)*r):(h.rotateMix+=(u-h.rotateMix)*r,h.translateMix+=(d-h.translateMix)*r,h.scaleMix+=(f-h.scaleMix)*r,h.shearMix+=(p-h.shearMix)*r)}},bt.ENTRIES=5,bt.PREV_TIME=-5,bt.PREV_ROTATE=-4,bt.PREV_TRANSLATE=-3,bt.PREV_SCALE=-2,bt.PREV_SHEAR=-1,bt.ROTATE=1,bt.TRANSLATE=2,bt.SCALE=3,bt.SHEAR=4,bt),pt=(o(wt,Y=Z),wt.prototype.getPropertyId=function(){return(s.pathConstraintPosition<<24)+this.pathConstraintIndex},wt.prototype.setFrame=function(t,e,n){this.frames[t*=wt.ENTRIES]=e,this.frames[t+wt.VALUE]=n},wt.prototype.apply=function(t,e,n,a,r,i,o){var s=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(n<s[0])switch(i){case tt.f.setup:return void(h.position=h.data.position);case tt.f.first:h.position+=(h.data.position-h.position)*r}else{var l,c=0;n>=s[s.length-wt.ENTRIES]?c=s[s.length+wt.PREV_VALUE]:(c=s[(l=et.binarySearch(s,n,wt.ENTRIES))+wt.PREV_VALUE],t=s[l],t=this.getCurvePercent(l/wt.ENTRIES-1,1-(n-t)/(s[l+wt.PREV_TIME]-t)),c+=(s[l+wt.VALUE]-c)*t),i==tt.f.setup?h.position=h.data.position+(c-h.data.position)*r:h.position+=(c-h.position)*r}},wt.ENTRIES=2,wt.PREV_TIME=-2,wt.PREV_VALUE=-1,wt.VALUE=1,wt),mt=(o(xt,_=pt),xt.prototype.getPropertyId=function(){return(s.pathConstraintSpacing<<24)+this.pathConstraintIndex},xt.prototype.apply=function(t,e,n,a,r,i,o){var s=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(n<s[0])switch(i){case tt.f.setup:return void(h.spacing=h.data.spacing);case tt.f.first:h.spacing+=(h.data.spacing-h.spacing)*r}else{var l,c=0;n>=s[s.length-xt.ENTRIES]?c=s[s.length+xt.PREV_VALUE]:(c=s[(l=et.binarySearch(s,n,xt.ENTRIES))+xt.PREV_VALUE],t=s[l],t=this.getCurvePercent(l/xt.ENTRIES-1,1-(n-t)/(s[l+xt.PREV_TIME]-t)),c+=(s[l+xt.VALUE]-c)*t),i==tt.f.setup?h.spacing=h.data.spacing+(c-h.data.spacing)*r:h.spacing+=(c-h.spacing)*r}},xt),gt=(o(Et,N=Z),Et.prototype.getPropertyId=function(){return(s.pathConstraintMix<<24)+this.pathConstraintIndex},Et.prototype.setFrame=function(t,e,n,a){this.frames[t*=Et.ENTRIES]=e,this.frames[t+Et.ROTATE]=n,this.frames[t+Et.TRANSLATE]=a},Et.prototype.apply=function(t,e,n,a,r,i,o){var s=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(n<s[0])switch(i){case tt.f.setup:return h.rotateMix=h.data.rotateMix,void(h.translateMix=h.data.translateMix);case tt.f.first:h.rotateMix+=(h.data.rotateMix-h.rotateMix)*r,h.translateMix+=(h.data.translateMix-h.translateMix)*r}else{var l,c=0,u=0;n>=s[s.length-Et.ENTRIES]?(c=s[s.length+Et.PREV_ROTATE],u=s[s.length+Et.PREV_TRANSLATE]):(c=s[(l=et.binarySearch(s,n,Et.ENTRIES))+Et.PREV_ROTATE],u=s[l+Et.PREV_TRANSLATE],t=s[l],t=this.getCurvePercent(l/Et.ENTRIES-1,1-(n-t)/(s[l+Et.PREV_TIME]-t)),c+=(s[l+Et.ROTATE]-c)*t,u+=(s[l+Et.TRANSLATE]-u)*t),i==tt.f.setup?(h.rotateMix=h.data.rotateMix+(c-h.data.rotateMix)*r,h.translateMix=h.data.translateMix+(u-h.data.translateMix)*r):(h.rotateMix+=(c-h.rotateMix)*r,h.translateMix+=(u-h.translateMix)*r)}},Et.ENTRIES=3,Et.PREV_TIME=-3,Et.PREV_ROTATE=-2,Et.PREV_TRANSLATE=-1,Et.ROTATE=1,Et.TRANSLATE=2,Et),Q=(yt.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,a=e.length;n<a;n++){var r=e[n];if(null!=r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var i=t*r.timeScale;if(0<r.delay){if(r.delay-=i,0<r.delay)continue;i=-r.delay,r.delay=0}var o=r.next;if(null!=o){var s=r.trackLast-o.delay;if(0<=s){for(o.delay=0,o.trackTime+=0==r.timeScale?0:(s/r.timeScale+t)*o.timeScale,r.trackTime+=i,this.setCurrent(n,o,!0);null!=o.mixingFrom;)o.mixTime+=t,o=o.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&null==r.mixingFrom){e[n]=null,this.queue.end(r),this.disposeNext(r);continue}if(null!=r.mixingFrom&&this.updateMixingFrom(r,t)){var h=r.mixingFrom;for((r.mixingFrom=null)!=h&&(h.mixingTo=null);null!=h;)this.queue.end(h),h=h.mixingFrom}r.trackTime+=i}}this.queue.drain()},yt.prototype.updateMixingFrom=function(t,e){var n=t.mixingFrom;if(null==n)return!0;var a=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,0<t.mixTime&&t.mixTime>=t.mixDuration?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,null!=n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),a):(n.trackTime+=e*n.timeScale,t.mixTime+=e,!1)},yt.prototype.apply=function(t){if(null==t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,n=this.tracks,a=!1,r=0,i=n.length;r<i;r++){var o=n[r];if(!(null==o||0<o.delay)){var a=!0,s=0==r?tt.f.first:o.mixBlend,h=o.alpha;null!=o.mixingFrom?h*=this.applyMixingFrom(o,t,s):o.trackTime>=o.trackEnd&&null==o.next&&(h=0);var l=o.animationLast,c=o.getAnimationTime(),u=o.animation.timelines.length,d=o.animation.timelines;if(0==r&&1==h||s==tt.f.add)for(var f=0;f<u;f++){tt.p.webkit602BugfixHelper(h,s);var p=d[f];p instanceof ht?this.applyAttachmentTimeline(p,t,c,s,!0):p.apply(t,l,c,e,h,s,tt.g.mixIn)}else{var m=o.timelineMode,g=0==o.timelinesRotation.length;g&&tt.p.setArraySize(o.timelinesRotation,u<<1,null);for(var v=o.timelinesRotation,f=0;f<u;f++){var y=d[f],E=m[f]==yt.SUBSEQUENT?s:tt.f.setup;y instanceof nt?this.applyRotateTimeline(y,t,c,h,E,v,f<<1,g):y instanceof ht?this.applyAttachmentTimeline(y,t,c,s,!0):(tt.p.webkit602BugfixHelper(h,s),y.apply(t,l,c,e,h,E,tt.g.mixIn))}}this.queueEvents(o,c),e.length=0,o.nextAnimationLast=c,o.nextTrackLast=o.trackTime}}for(var x=this.unkeyedState+yt.SETUP,w=t.slots,b=0,S=t.slots.length;b<S;b++){var I,T=w[b];T.attachmentState==x&&(I=T.data.attachmentName,T.setAttachment(null==I?null:t.getAttachment(T.data.index,I)))}return this.unkeyedState+=2,this.queue.drain(),a},yt.prototype.applyMixingFrom=function(t,e,n){var a=t.mixingFrom;null!=a.mixingFrom&&this.applyMixingFrom(a,e,n);var r=0;0==t.mixDuration?(r=1,n==tt.f.first&&(n=tt.f.setup)):(1<(r=t.mixTime/t.mixDuration)&&(r=1),n!=tt.f.first&&(n=a.mixBlend));var i=r<a.eventThreshold?this.events:null,o=r<a.attachmentThreshold,s=r<a.drawOrderThreshold,h=a.animationLast,l=a.getAnimationTime(),c=a.animation.timelines.length,u=a.animation.timelines,d=a.alpha*t.interruptAlpha,f=d*(1-r);if(n==tt.f.add)for(var p=0;p<c;p++)u[p].apply(e,h,l,i,f,n,tt.g.mixOut);else{var m=a.timelineMode,g=a.timelineHoldMix,v=0==a.timelinesRotation.length;v&&tt.p.setArraySize(a.timelinesRotation,c<<1,null);for(var y=a.timelinesRotation,p=a.totalAlpha=0;p<c;p++){var E=u[p],x=tt.g.mixOut,w=void 0,b=0;switch(m[p]){case yt.SUBSEQUENT:if(!s&&E instanceof ut)continue;w=n,b=f;break;case yt.FIRST:w=tt.f.setup,b=f;break;case yt.HOLD_SUBSEQUENT:w=n,b=d;break;case yt.HOLD_FIRST:w=tt.f.setup,b=d;break;default:var w=tt.f.setup,S=g[p],b=d*Math.max(0,1-S.mixTime/S.mixDuration)}a.totalAlpha+=b,E instanceof nt?this.applyRotateTimeline(E,e,l,b,w,y,p<<1,v):E instanceof ht?this.applyAttachmentTimeline(E,e,l,w,o):(tt.p.webkit602BugfixHelper(b,n),s&&E instanceof ut&&w==tt.f.setup&&(x=tt.g.mixIn),E.apply(e,h,l,i,b,w,x))}}return 0<t.mixDuration&&this.queueEvents(a,l),this.events.length=0,a.nextAnimationLast=l,a.nextTrackLast=a.trackTime,r},yt.prototype.applyAttachmentTimeline=function(t,e,n,a,r){var i,o=e.slots[t.slotIndex];o.bone.active&&(n<(i=t.frames)[0]?a!=tt.f.setup&&a!=tt.f.first||this.setAttachment(e,o,o.data.attachmentName,r):(n=n>=i[i.length-1]?i.length-1:et.binarySearch(i,n)-1,this.setAttachment(e,o,t.attachmentNames[n],r)),o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+yt.SETUP))},yt.prototype.setAttachment=function(t,e,n,a){e.setAttachment(null==n?null:t.getAttachment(e.data.index,n)),a&&(e.attachmentState=this.unkeyedState+yt.CURRENT)},yt.prototype.applyRotateTimeline=function(t,e,n,a,r,i,o,s){if(s&&(i[o]=0),1!=a){var h=t,l=h.frames,c=e.bones[h.boneIndex];if(c.active){var u=0,d=0;if(n<l[0])switch(r){case tt.f.setup:c.rotation=c.data.rotation;default:return;case tt.f.first:u=c.rotation,d=c.data.rotation}else u=(r==tt.f.setup?c.data:c).rotation,n>=l[l.length-nt.ENTRIES]?d=c.data.rotation+l[l.length+nt.PREV_ROTATION]:(p=l[(f=et.binarySearch(l,n,nt.ENTRIES))+nt.PREV_ROTATION],g=l[f],m=h.getCurvePercent((f>>1)-1,1-(n-g)/(l[f+nt.PREV_TIME]-g)),d=l[f+nt.ROTATION]-p,d=p+(d-=360*(16384-(16384.499999999996-d/360|0)))*m+c.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0)));var f,p,m,g=0,l=d-u;0==(l-=360*(16384-(16384.499999999996-l/360|0)))?g=i[o]:(p=f=0,p=s?(f=0,l):(f=i[o],i[o+1]),m=0<l,s=0<=f,tt.e.signum(p)!=tt.e.signum(l)&&Math.abs(p)<=90&&(180<Math.abs(f)&&(f+=360*tt.e.signum(f)),s=m),g=l+f-f%360,s!=m&&(g+=360*tt.e.signum(f)),i[o]=g),i[o+1]=l,c.rotation=(u+=g*a)-360*(16384-(16384.499999999996-u/360|0))}}else t.apply(e,0,n,null,1,r,tt.g.mixIn)},yt.prototype.queueEvents=function(t,e){for(var n=t.animationStart,a=t.animationEnd,r=a-n,i=t.trackLast%r,o=this.events,s=0,h=o.length;s<h;s++){var l=o[s];if(l.time<i)break;l.time>a||this.queue.event(t,l)}for((t.loop?0==r||i>t.trackTime%r:a<=e&&t.animationLast<a)&&this.queue.complete(t);s<h;s++)o[s].time<n||this.queue.event(t,o[s])},yt.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},yt.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){t=this.tracks[t];if(null!=t){this.queue.end(t),this.disposeNext(t);for(var e=t;;){var n=e.mixingFrom;if(null==n)break;this.queue.end(n),e.mixingFrom=null,e.mixingTo=null,e=n}this.tracks[t.trackIndex]=null,this.queue.drain()}}},yt.prototype.setCurrent=function(t,e,n){var a=this.expandToIndex(t);this.tracks[t]=e,null!=a&&(n&&this.queue.interrupt(a),((e.mixingFrom=a).mixingTo=e).mixTime=0,null!=a.mixingFrom&&0<a.mixDuration&&(e.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(e)},yt.prototype.setAnimation=function(t,e,n){var a=this.data.skeletonData.findAnimation(e);if(null==a)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,a,n)},yt.prototype.setAnimationWith=function(t,e,n){if(null==e)throw new Error("animation cannot be null.");var a=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,a=!1):this.disposeNext(r));r=this.trackEntry(t,e,n,r);return this.setCurrent(t,r,a),this.queue.drain(),r},yt.prototype.addAnimation=function(t,e,n,a){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,n,a)},yt.prototype.addAnimationWith=function(t,e,n,a){if(null==e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(null!=r)for(;null!=r.next;)r=r.next;n=this.trackEntry(t,e,n,r);return null==r?(this.setCurrent(t,n,!0),this.queue.drain()):(r.next=n,a<=0&&(0!=(t=r.animationEnd-r.animationStart)?(r.loop?a+=t*(1+(r.trackTime/t|0)):a+=Math.max(t,r.trackTime),a-=this.data.getMix(r.animation,e)):a=r.trackTime)),n.delay=a,n},yt.prototype.setEmptyAnimation=function(t,e){t=this.setAnimationWith(t,yt.emptyAnimation,!1);return t.mixDuration=e,t.trackEnd=e,t},yt.prototype.addEmptyAnimation=function(t,e,n){n<=0&&(n-=e);n=this.addAnimationWith(t,yt.emptyAnimation,!1,n);return n.mixDuration=e,n.trackEnd=e,n},yt.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,a=this.tracks.length;n<a;n++){var r=this.tracks[n];null!=r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},yt.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(tt.p.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},yt.prototype.trackEntry=function(t,e,n,a){var r=this.trackEntryPool.obtain();return r.trackIndex=t,r.animation=e,r.loop=n,r.holdPrevious=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.interruptAlpha=1,r.mixTime=0,r.mixDuration=null==a?0:this.data.getMix(a.animation,e),r.mixBlend=tt.f.replace,r},yt.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},yt.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,e=this.tracks.length;t<e;t++){var n=this.tracks[t];if(null!=n){for(;null!=n.mixingFrom;)n=n.mixingFrom;for(;null!=n.mixingFrom&&n.mixBlend==tt.f.add||this.computeHold(n),null!=(n=n.mixingTo););}}},yt.prototype.computeHold=function(t){var e=t.mixingTo,n=t.animation.timelines,a=t.animation.timelines.length,r=tt.p.setArraySize(t.timelineMode,a);t.timelineHoldMix.length=0;var i=tt.p.setArraySize(t.timelineHoldMix,a),o=this.propertyIDs;if(null!=e&&e.holdPrevious)for(var s=0;s<a;s++)r[s]=o.add(n[s].getPropertyId())?yt.HOLD_FIRST:yt.HOLD_SUBSEQUENT;else t:for(s=0;s<a;s++){var h=n[s],l=h.getPropertyId();if(o.add(l))if(null==e||h instanceof ht||h instanceof ut||h instanceof ct||!e.animation.hasTimeline(l))r[s]=yt.FIRST;else{for(var c=e.mixingTo;null!=c;c=c.mixingTo)if(!c.animation.hasTimeline(l)){if(0<t.mixDuration){r[s]=yt.HOLD_MIX,i[s]=c;continue t}break}r[s]=yt.HOLD_FIRST}else r[s]=yt.SUBSEQUENT}},yt.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},yt.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},yt.prototype.removeListener=function(t){t=this.listeners.indexOf(t);0<=t&&this.listeners.splice(t,1)},yt.prototype.clearListeners=function(){this.listeners.length=0},yt.prototype.clearListenerNotifications=function(){this.queue.clear()},yt.prototype.setAnimationByName=function(t,e,n){yt.deprecatedWarning1||(yt.deprecatedWarning1=!0),this.setAnimation(t,e,n)},yt.prototype.addAnimationByName=function(t,e,n,a){yt.deprecatedWarning2||(yt.deprecatedWarning2=!0),this.addAnimation(t,e,n,a)},yt.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},yt.prototype.hasAnimationByName=function(t){return yt.deprecatedWarning3||(yt.deprecatedWarning3=!0),this.hasAnimation(t)},yt.emptyAnimation=new et("<empty>",[],0),yt.SUBSEQUENT=0,yt.FIRST=1,yt.HOLD_SUBSEQUENT=2,yt.HOLD_FIRST=3,yt.HOLD_MIX=4,yt.SETUP=1,yt.CURRENT=2,yt.deprecatedWarning1=!1,yt.deprecatedWarning2=!1,yt.deprecatedWarning3=!1,yt),J=(vt.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},vt.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},vt.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},vt.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},vt.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(vt.prototype,"time",{get:function(){return vt.deprecatedWarning1||(vt.deprecatedWarning1=!0),this.trackTime},set:function(t){vt.deprecatedWarning1||(vt.deprecatedWarning1=!0),this.trackTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(vt.prototype,"endTime",{get:function(){return vt.deprecatedWarning2||(vt.deprecatedWarning2=!0),this.trackTime},set:function(t){vt.deprecatedWarning2||(vt.deprecatedWarning2=!0),this.trackTime=t},enumerable:!1,configurable:!0}),vt.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},vt.deprecatedWarning1=!1,vt.deprecatedWarning2=!1,vt),K=($.prototype.start=function(t){this.objects.push(F.start),this.objects.push(t),this.animState.animationsChanged=!0},$.prototype.interrupt=function(t){this.objects.push(F.interrupt),this.objects.push(t)},$.prototype.end=function(t){this.objects.push(F.end),this.objects.push(t),this.animState.animationsChanged=!0},$.prototype.dispose=function(t){this.objects.push(F.dispose),this.objects.push(t)},$.prototype.complete=function(t){this.objects.push(F.complete),this.objects.push(t)},$.prototype.event=function(t,e){this.objects.push(F.event),this.objects.push(t),this.objects.push(e)},$.prototype.deprecateStuff=function(){return $.deprecatedWarning1||($.deprecatedWarning1=!0),!0},$.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var a=t[n],r=t[n+1];switch(a){case F.start:null!=r.listener&&r.listener.start&&r.listener.start(r);for(var i=0;i<e.length;i++)e[i].start&&e[i].start(r);r.onStart&&this.deprecateStuff()&&r.onStart(r.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(r.trackIndex);break;case F.interrupt:for(null!=r.listener&&r.listener.interrupt&&r.listener.interrupt(r),i=0;i<e.length;i++)e[i].interrupt&&e[i].interrupt(r);break;case F.end:for(null!=r.listener&&r.listener.end&&r.listener.end(r),i=0;i<e.length;i++)e[i].end&&e[i].end(r);r.onEnd&&this.deprecateStuff()&&r.onEnd(r.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(r.trackIndex);case F.dispose:for(null!=r.listener&&r.listener.dispose&&r.listener.dispose(r),i=0;i<e.length;i++)e[i].dispose&&e[i].dispose(r);this.animState.trackEntryPool.free(r);break;case F.complete:for(null!=r.listener&&r.listener.complete&&r.listener.complete(r),i=0;i<e.length;i++)e[i].complete&&e[i].complete(r);var o=tt.e.toInt(r.loopsCount());r.onComplete&&this.deprecateStuff()&&r.onComplete(r.trackIndex,o),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(r.trackIndex,o);break;case F.event:var s=t[2+n++];for(null!=r.listener&&r.listener.event&&r.listener.event(r,s),i=0;i<e.length;i++)e[i].event&&e[i].event(r,s);r.onEvent&&this.deprecateStuff()&&r.onEvent(r.trackIndex,s),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(r.trackIndex,s)}}this.clear(),this.drainDisabled=!1}},$.prototype.clear=function(){this.objects.length=0},$.deprecatedWarning1=!1,$);function $(t){this.objects=[],this.drainDisabled=!1,this.animState=t}function vt(){this.mixBlend=tt.f.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}function yt(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new K(this),this.propertyIDs=new tt.d,this.animationsChanged=!1,this.trackEntryPool=new tt.h(function(){return new J}),this.data=t}function Et(t){var e=N.call(this,t)||this;return e.frames=tt.p.newFloatArray(t*Et.ENTRIES),e}function xt(t){return _.call(this,t)||this}function wt(t){var e=Y.call(this,t)||this;return e.frames=tt.p.newFloatArray(t*wt.ENTRIES),e}function bt(t){var e=X.call(this,t)||this;return e.frames=tt.p.newFloatArray(t*bt.ENTRIES),e}function St(t){var e=B.call(this,t)||this;return e.frames=tt.p.newFloatArray(t*St.ENTRIES),e}function It(t){this.frames=tt.p.newFloatArray(t),this.drawOrders=new Array(t)}function Tt(t){this.frames=tt.p.newFloatArray(t),this.events=new Array(t)}function Mt(t){var e=L.call(this,t)||this;return e.frames=tt.p.newFloatArray(t),e.frameVertices=new Array(t),null==z&&(z=tt.p.newFloatArray(64)),e}function At(t){this.frames=tt.p.newFloatArray(t),this.attachmentNames=new Array(t)}function Rt(t){var e=W.call(this,t)||this;return e.frames=tt.p.newFloatArray(t*Rt.ENTRIES),e}function Ct(t){var e=q.call(this,t)||this;return e.frames=tt.p.newFloatArray(t*Ct.ENTRIES),e}function Vt(t){return U.call(this,t)||this}function kt(t){return H.call(this,t)||this}function Pt(t){var e=j.call(this,t)||this;return e.frames=tt.p.newFloatArray(t*Pt.ENTRIES),e}function Ft(t){var e=G.call(this,t)||this;return e.frames=tt.p.newFloatArray(t<<1),e}function Nt(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=tt.p.newFloatArray((t-1)*Nt.BEZIER_SIZE)}(n=F=F||{})[n.start=0]="start",n[n.interrupt=1]="interrupt",n[n.end=2]="end",n[n.dispose=3]="dispose",n[n.complete=4]="complete",n[n.event=5]="event";var _t,Yt,Xt,Ot=(ee.prototype.start=function(t){},ee.prototype.interrupt=function(t){},ee.prototype.end=function(t){},ee.prototype.dispose=function(t){},ee.prototype.complete=function(t){},ee.prototype.event=function(t,e){},ee),Bt=(te.prototype.setMix=function(t,e,n){var a=this.skeletonData.findAnimation(t);if(null==a)throw new Error("Animation not found: "+t);t=this.skeletonData.findAnimation(e);if(null==t)throw new Error("Animation not found: "+e);this.setMixWith(a,t,n)},te.prototype.setMixByName=function(t,e,n){te.deprecatedWarning1||(te.deprecatedWarning1=!0),this.setMix(t,e,n)},te.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");e=t.name+"."+e.name;this.animationToMixTime[e]=n},te.prototype.getMix=function(t,e){e=t.name+"."+e.name,e=this.animationToMixTime[e];return void 0===e?this.defaultMix:e},te.deprecatedWarning1=!1,te),Dt=($t.prototype.newRegionAttachment=function(t,e,n){var a=this.atlas.findRegion(n);if(null==a)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");e=new x(e);return e.region=a,e},$t.prototype.newMeshAttachment=function(t,e,n){var a=this.atlas.findRegion(n);if(null==a)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");e=new y(e);return e.region=a,e},$t.prototype.newBoundingBoxAttachment=function(t,e){return new g(e)},$t.prototype.newPathAttachment=function(t,e){return new D(e)},$t.prototype.newPointAttachment=function(t,e){return new E(e)},$t.prototype.newClippingAttachment=function(t,e){return new v(e)},$t),Lt=(Object.defineProperty(Kt.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(Kt.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),Kt.prototype.isActive=function(){return this.active},Kt.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Kt.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Kt.prototype.updateWorldTransformWith=function(t,e,n,a,r,i,o){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=a,this.ascaleY=r,this.ashearX=i,this.ashearY=o,this.appliedValid=!0;var s=this.parent,h=this.matrix,l=this.skeleton.scaleX,c=tt.r.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==s){var u=this.skeleton,d=n+90+o;return h.a=tt.e.cosDeg(n+i)*a*l,h.c=tt.e.cosDeg(d)*r*l,h.b=tt.e.sinDeg(n+i)*a*c,h.d=tt.e.sinDeg(d)*r*c,h.tx=t*l+u.x,void(h.ty=e*c+u.y)}var f=s.matrix.a,p=s.matrix.c,m=s.matrix.b,g=s.matrix.d;switch(h.tx=f*t+p*e+s.matrix.tx,h.ty=m*t+g*e+s.matrix.ty,this.data.transformMode){case tt.o.Normal:var d=n+90+o,v=tt.e.cosDeg(n+i)*a,y=tt.e.cosDeg(d)*r,E=tt.e.sinDeg(n+i)*a,x=tt.e.sinDeg(d)*r;return h.a=f*v+p*E,h.c=f*y+p*x,h.b=m*v+g*E,void(h.d=m*y+g*x);case tt.o.OnlyTranslation:d=n+90+o,h.a=tt.e.cosDeg(n+i)*a,h.c=tt.e.cosDeg(d)*r,h.b=tt.e.sinDeg(n+i)*a,h.d=tt.e.sinDeg(d)*r;break;case tt.o.NoRotationOrReflection:var w=f*f+m*m,b=0,S=n+i-(b=1e-4<w?(w=Math.abs(f*g-p*m)/w,f/=this.skeleton.scaleX,p=(m/=this.skeleton.scaleY)*w,g=f*w,Math.atan2(m,f)*tt.e.radDeg):(m=f=0,90-Math.atan2(g,p)*tt.e.radDeg)),I=n+o-b+90,v=tt.e.cosDeg(S)*a,y=tt.e.cosDeg(I)*r,E=tt.e.sinDeg(S)*a,x=tt.e.sinDeg(I)*r;h.a=f*v-p*E,h.c=f*y-p*x,h.b=m*v+g*E,h.d=m*y+g*x;break;case tt.o.NoScale:case tt.o.NoScaleOrReflection:var T=tt.e.cosDeg(n),b=tt.e.sinDeg(n),S=(f*T+p*b)/l,I=(m*T+g*b)/c;S*=w=1e-5<(w=Math.sqrt(S*S+I*I))?1/w:w,I*=w,w=Math.sqrt(S*S+I*I),this.data.transformMode==tt.o.NoScale&&f*g-p*m<0!=(tt.r.yDown?this.skeleton.scaleX<0!=0<this.skeleton.scaleY:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(w=-w);T=Math.PI/2+Math.atan2(I,S),b=Math.cos(T)*w,w=Math.sin(T)*w;v=tt.e.cosDeg(i)*a,y=tt.e.cosDeg(90+o)*r,E=tt.e.sinDeg(i)*a,x=tt.e.sinDeg(90+o)*r,h.a=S*v+b*E,h.c=S*y+b*x,h.b=I*v+w*E,h.d=I*y+w*x}h.a*=l,h.c*=l,h.b*=c,h.d*=c},Kt.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},Kt.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*tt.e.radDeg},Kt.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*tt.e.radDeg},Kt.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},Kt.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},Kt.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,e=this.matrix;if(null==t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*tt.e.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*tt.e.radDeg);var n=t.matrix,a=1/(n.a*n.d-n.b*n.c),r=e.tx-n.tx,i=e.ty-n.ty;this.ax=r*n.d*a-i*n.c*a,this.ay=i*n.a*a-r*n.b*a;t=a*n.d,i=a*n.a,r=a*n.c,a*=n.b,n=t*e.a-r*e.b,t=t*e.c-r*e.d,r=i*e.b-a*e.a,a=i*e.d-a*e.c;this.ashearX=0,this.ascaleX=Math.sqrt(n*n+r*r),1e-4<this.ascaleX?(this.ascaleY=(e=n*a-t*r)/this.ascaleX,this.ashearY=Math.atan2(n*t+r*a,e)*tt.e.radDeg,this.arotation=Math.atan2(r,n)*tt.e.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(t*t+a*a),this.ashearY=0,this.arotation=90-Math.atan2(a,t)*tt.e.radDeg)},Kt.prototype.worldToLocal=function(t){var e=this.matrix,n=e.a,a=e.c,r=e.b,i=e.d,o=1/(n*i-a*r),s=t.x-e.tx,e=t.y-e.ty;return t.x=s*i*o-e*a*o,t.y=e*n*o-s*r*o,t},Kt.prototype.localToWorld=function(t){var e=this.matrix,n=t.x,a=t.y;return t.x=n*e.a+a*e.c+e.tx,t.y=n*e.b+a*e.d+e.ty,t},Kt.prototype.worldToLocalRotation=function(t){var e=tt.e.sinDeg(t),n=tt.e.cosDeg(t),t=this.matrix;return Math.atan2(t.a*e-t.b*n,t.d*n-t.c*e)*tt.e.radDeg},Kt.prototype.localToWorldRotation=function(t){var e=tt.e.sinDeg(t),n=tt.e.cosDeg(t),t=this.matrix;return Math.atan2(n*t.b+e*t.d,n*t.a+e*t.c)*tt.e.radDeg},Kt.prototype.rotateWorld=function(t){var e=this.matrix,n=e.a,a=e.c,r=e.b,i=e.d,o=tt.e.cosDeg(t),t=tt.e.sinDeg(t);e.a=o*n-t*r,e.c=o*a-t*i,e.b=t*n+o*r,e.d=t*a+o*i,this.appliedValid=!1},Kt),Wt=function(t,e,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=tt.o.Normal,this.skinRequired=!1,this.color=new tt.c,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=n},qt=function(t,e,n){this.name=t,this.order=e,this.skinRequired=n},Ut=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},Ht=function(t){this.name=t},jt=(Jt.prototype.isActive=function(){return this.active},Jt.prototype.apply=function(){this.update()},Jt.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},Jt.prototype.apply1=function(t,e,n,a,r,i,o){t.appliedValid||t.updateAppliedTransform();var s=t.parent.matrix,h=s.a,l=s.c,c=s.b,u=s.d,d=-t.ashearX-t.arotation,f=0,p=0;switch(t.data.transformMode){case tt.o.OnlyTranslation:f=e-t.worldX,p=n-t.worldY;break;case tt.o.NoRotationOrReflection:var m=Math.abs(h*u-l*c)/(h*h+c*c),g=h/t.skeleton.scaleX,v=c/t.skeleton.scaleY,l=-v*m*t.skeleton.scaleX,u=g*m*t.skeleton.scaleY;d+=Math.atan2(v,g)*tt.e.radDeg;default:var y=e-s.tx,v=n-s.ty,g=h*u-l*c,f=(y*u-v*l)/g-t.ax,p=(v*h-y*c)/g-t.ay}d+=Math.atan2(p,f)*tt.e.radDeg,t.ascaleX<0&&(d+=180),180<d?d-=360:d<-180&&(d+=360);var E=t.ascaleX,x=t.ascaleY;if(a||r){switch(t.data.transformMode){case tt.o.NoScale:case tt.o.NoScaleOrReflection:f=e-t.worldX,p=n-t.worldY}var w=t.data.length*E,b=Math.sqrt(f*f+p*p);(a&&b<w||r&&w<b&&1e-4<w)&&(E*=m=(b/w-1)*o+1,i&&(x*=m))}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+d*o,E,x,t.ashearX,t.ashearY)},Jt.prototype.apply2=function(t,e,n,a,r,i,o,s){if(0!=s){t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var h=t.ax,l=t.ay,c=t.ascaleX,u=c,d=t.ascaleY,f=e.ascaleX,p=t.matrix,m=0,g=0,v=0,v=c<0?(c=-c,m=180,-1):(m=0,1);d<0&&(d=-d,v=-v);var g=f<0?(f=-f,180):0,y=e.ax,E=0,x=0,w=0,b=p.a,S=p.c,I=p.b,T=p.d,M=Math.abs(c-d)<=1e-4,w=M?(x=b*y+S*(E=e.ay)+p.tx,I*y+T*E+p.ty):(E=0,x=b*y+p.tx,I*y+p.ty),A=t.parent.matrix;b=A.a,S=A.c,I=A.b;var R,p=1/(b*(T=A.d)-S*I),C=x-A.tx,V=w-A.ty,x=(C*T-V*S)*p-h,w=(V*b-C*I)*p-l,k=Math.sqrt(x*x+w*w),P=e.data.length*f;if(k<1e-4)return this.apply1(t,n,a,!1,i,!1,s),void e.updateWorldTransformWith(y,E,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var F=((C=n-A.tx)*T-(V=a-A.ty)*S)*p-h,N=(V*b-C*I)*p-l,_=F*F+N*N;0!=o&&(o*=c*(f+1)/2,0<(f=(Z=Math.sqrt(_))-k-P*c+o)&&(_=(F-=(z=(f-o*(1-(z=Math.min(1,f/(2*o))-1)*z))/Z)*F)*F+(N-=z*N)*N));t:if(M){var Y=(_-k*k-(P*=c)*P)/(2*k*P);Y<-1?Y=-1:1<Y&&(Y=1,i&&(u*=(Math.sqrt(_)/(k+P)-1)*s+1)),R=Math.acos(Y)*r,b=k+P*Y,S=P*Math.sin(R),G=Math.atan2(N*b-F*S,F*b+N*S)}else{var X=(b=c*P)*b,O=(S=d*P)*S,B=Math.atan2(N,F),D=-2*O*k,L=O-X;if(0<=(T=D*D-4*L*(I=O*k*k+X*_-X*O))){var W=Math.sqrt(T),q=(W=-(D+(W=D<0?-W:W))/2)/L,U=I/W,H=Math.abs(q)<Math.abs(U)?q:U;if(H*H<=_){V=Math.sqrt(_-H*H)*r,G=B-Math.atan2(V,H),R=Math.atan2(V/d,(H-k)/c);break t}}var j=tt.e.PI,Y=k-b,D=Y*Y,L=0,W=0,q=k+b,U=q*q,H=0;-1<=(I=-b*k/(X-O))&&I<=1&&(I=Math.acos(I),(T=(C=b*Math.cos(I)+k)*C+(V=S*Math.sin(I))*V)<D&&(j=I,D=T,Y=C,L=V),U<T&&(W=I,U=T,q=C,H=V)),R=_<=(D+U)/2?(G=B-Math.atan2(L*r,Y),j*r):(G=B-Math.atan2(H*r,q),W*r)}var G,Z=Math.atan2(E,y)*v,z=t.arotation;180<(G=(G-Z)*tt.e.radDeg+m-z)?G-=360:G<-180&&(G+=360),t.updateWorldTransformWith(h,l,z+G*s,u,t.ascaleY,0,0),z=e.arotation,180<(R=((R+Z)*tt.e.radDeg-e.ashearX)*v+g-z)?R-=360:R<-180&&(R+=360),e.updateWorldTransformWith(y,E,z+R*s,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}else e.updateWorldTransform()},Jt),Gt=(o(Qt,Xt=qt),Qt),Zt=(o(zt,Yt=qt),zt);function zt(t){t=Yt.call(this,t,0,!1)||this;return t.bones=new Array,t}function Qt(t){t=Xt.call(this,t,0,!1)||this;return t.bones=new Array,t.bendDirection=1,t.compress=!1,t.stretch=!1,t.uniform=!1,t.mix=1,t.softness=0,t}function Jt(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}function Kt(t,e,n){if(this.matrix=new a.d,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}function $t(t){this.atlas=t}function te(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}function ee(){}(n=_t=_t||{})[n.Length=0]="Length",n[n.Fixed=1]="Fixed",n[n.Percent=2]="Percent";var ne,ae,re=(Ve.prototype.isActive=function(){return this.active},Ve.prototype.apply=function(){this.update()},Ve.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof D){var e=this.rotateMix,n=this.translateMix,a=0<e;if(0<n||a){var r=this.data,i=r.spacingMode,o=i==_t.Length,s=r.rotateMode,h=s==tt.k.Tangent,l=s==tt.k.ChainScale,c=this.bones.length,u=h?c:c+1,d=this.bones,f=tt.p.setArraySize(this.spaces,u),p=null,m=this.spacing;if(l||o){l&&(p=tt.p.setArraySize(this.lengths,c));for(var g=0,v=u-1;g<v;){var y,E=d[g],x=E.data.length;x<Ve.epsilon?(l&&(p[g]=0),f[++g]=0):(R=x*E.matrix.a,C=x*E.matrix.b,y=Math.sqrt(R*R+C*C),l&&(p[g]=y),f[++g]=(o?x+m:m)*y/x)}}else for(g=1;g<u;g++)f[g]=m;var w,b=this.computeWorldPositions(t,u,h,r.positionMode==tt.i.Percent,i==_t.Percent),S=b[0],I=b[1],T=r.offsetRotation,M=!1;for(0==T?M=s==tt.k.Chain:(M=!1,T*=0<(w=this.target.bone.matrix).a*w.d-w.b*w.c?tt.e.degRad:-tt.e.degRad),g=0,w=3;g<c;g++,w+=3){var A=(E=d[g]).matrix;A.tx+=(S-A.tx)*n,A.ty+=(I-A.ty)*n;var R,C,V=(R=b[w])-S,k=(C=b[w+1])-I;!l||0!=(X=p[g])&&(O=(Math.sqrt(V*V+k*k)/X-1)*e+1,A.a*=O,A.b*=O);var P,F,N,_,Y,X,O,B,S=R,I=C;a&&(P=A.a,F=A.c,N=A.b,_=A.d,X=Y=B=0,B=h?b[w-1]:0==f[g+1]?b[w+2]:Math.atan2(k,V),B-=Math.atan2(N,P),M?(Y=Math.cos(B),X=Math.sin(B),S+=((O=E.data.length)*(Y*P-X*N)-V)*e,I+=(O*(X*P+Y*N)-k)*e):B+=T,B>tt.e.PI?B-=tt.e.PI2:B<-tt.e.PI&&(B+=tt.e.PI2),B*=e,Y=Math.cos(B),X=Math.sin(B),A.a=Y*P-X*N,A.c=Y*F-X*_,A.b=X*P+Y*N,A.d=X*F+Y*_),E.appliedValid=!1}}}},Ve.prototype.computeWorldPositions=function(t,e,n,a,r){var i=this.target,o=this.position,s=this.spaces,h=tt.p.setArraySize(this.positions,3*e+2),l=null,c=t.closed,u=t.worldVerticesLength,d=u/6,f=Ve.NONE;if(!t.constantSpeed){var p=t.lengths,m=p[d-=c?1:2];if(a&&(o*=m),r)for(var g=0;g<e;g++)s[g]*=m;for(var l=tt.p.setArraySize(this.world,8),g=0,v=0,y=0;g<e;g++,v+=3){var E=s[g],x=o+=E;if(c)(x%=m)<0&&(x+=m),y=0;else{if(x<0){f!=Ve.BEFORE&&(f=Ve.BEFORE,t.computeWorldVertices(i,2,4,l,0,2)),this.addBeforePosition(x,l,0,h,v);continue}if(m<x){f!=Ve.AFTER&&(f=Ve.AFTER,t.computeWorldVertices(i,u-6,4,l,0,2)),this.addAfterPosition(x-m,l,0,h,v);continue}}for(;;y++){var w,b=p[y];if(!(b<x)){0==y?x/=b:x=(x-(w=p[y-1]))/(b-w);break}}y!=f&&(f=y,c&&y==d?(t.computeWorldVertices(i,u-4,4,l,0,2),t.computeWorldVertices(i,0,4,l,4,2)):t.computeWorldVertices(i,6*y+2,8,l,0,2)),this.addCurvePosition(x,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],h,v,n||0<g&&0==E)}return h}c?(l=tt.p.setArraySize(this.world,u+=2),t.computeWorldVertices(i,2,u-4,l,0,2),t.computeWorldVertices(i,0,2,l,u-4,2),l[u-2]=l[0],l[u-1]=l[1]):(d--,l=tt.p.setArraySize(this.world,u-=4),t.computeWorldVertices(i,2,u,l,0,2));for(var S=tt.p.setArraySize(this.curves,d),I=0,T=l[0],M=l[1],A=0,R=0,C=0,V=0,k=0,P=0,F=0,N=0,_=0,Y=0,X=0,O=0,B=0,D=0,L=(g=0,2);g<d;g++,L+=6)A=l[L],R=l[L+1],C=l[L+2],V=l[L+3],X=2*(F=.1875*(T-2*A+C))+(_=.09375*(3*(A-C)-T+(k=l[L+4]))),O=2*(N=.1875*(M-2*R+V))+(Y=.09375*(3*(R-V)-M+(P=l[L+5]))),B=.75*(A-T)+F+.16666667*_,D=.75*(R-M)+N+.16666667*Y,I+=Math.sqrt(B*B+D*D),B+=X,D+=O,X+=_,O+=Y,I+=Math.sqrt(B*B+D*D),B+=X,D+=O,I+=Math.sqrt(B*B+D*D),B+=X+_,D+=O+Y,I+=Math.sqrt(B*B+D*D),S[g]=I,T=k,M=P;if(a&&(o*=I),r)for(g=0;g<e;g++)s[g]*=I;for(var W=this.segments,q=0,U=y=v=g=0;g<e;g++,v+=3){if(x=o+=E=s[g],c)(x%=I)<0&&(x+=I),y=0;else{if(x<0){this.addBeforePosition(x,l,0,h,v);continue}if(I<x){this.addAfterPosition(x-I,l,u-4,h,v);continue}}for(;;y++){var H=S[y];if(!(H<x)){0==y?x/=H:x=(x-(w=S[y-1]))/(H-w);break}}if(y!=f){var f=y,j=6*y,T=l[j],M=l[j+1],A=l[j+2],R=l[j+3],C=l[j+4],V=l[j+5],X=2*(F=.03*(T-2*A+C))+(_=.006*(3*(A-C)-T+(k=l[j+6]))),O=2*(N=.03*(M-2*R+V))+(Y=.006*(3*(R-V)-M+(P=l[j+7]))),B=.3*(A-T)+F+.16666667*_,D=.3*(R-M)+N+.16666667*Y,q=Math.sqrt(B*B+D*D);for(W[0]=q,j=1;j<8;j++)B+=X,D+=O,X+=_,O+=Y,q+=Math.sqrt(B*B+D*D),W[j]=q;B+=X,D+=O,q+=Math.sqrt(B*B+D*D),W[8]=q,B+=X+_,D+=O+Y,q+=Math.sqrt(B*B+D*D),W[9]=q,U=0}for(x*=q;;U++){var G=W[U];if(!(G<x)){0==U?x/=G:x=U+(x-(w=W[U-1]))/(G-w);break}}this.addCurvePosition(.1*x,T,M,A,R,C,V,k,P,h,v,n||0<g&&0==E)}return h},Ve.prototype.addBeforePosition=function(t,e,n,a,r){var i=e[n],o=e[n+1],s=e[n+2]-i,n=e[n+3]-o,s=Math.atan2(n,s);a[r]=i+t*Math.cos(s),a[r+1]=o+t*Math.sin(s),a[r+2]=s},Ve.prototype.addAfterPosition=function(t,e,n,a,r){var i=e[n+2],o=e[n+3],s=i-e[n],n=o-e[n+1],s=Math.atan2(n,s);a[r]=i+t*Math.cos(s),a[r+1]=o+t*Math.sin(s),a[r+2]=s},Ve.prototype.addCurvePosition=function(t,e,n,a,r,i,o,s,h,l,c,u){var d=(t=0==t||isNaN(t)?1e-4:t)*t,f=d*t,p=1-t,m=p*p,g=m*p,v=p*t,y=3*v,p=p*y,t=y*t,s=e*g+a*p+i*t+s*f,f=n*g+r*p+o*t+h*f;l[c]=s,l[c+1]=f,u&&(l[c+2]=Math.atan2(f-(n*m+r*v*2+o*d),s-(e*m+a*v*2+i*d)))},Ve.NONE=-1,Ve.BEFORE=-2,Ve.AFTER=-3,Ve.epsilon=1e-5,Ve),ie=(Ce.prototype.getAttachment=function(){return this.attachment},Ce.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},Ce.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},Ce.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},Ce.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},Ce),oe=(Re.prototype.isActive=function(){return this.active},Re.prototype.apply=function(){this.update()},Re.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},Re.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,a=this.shearMix,r=this.target,i=r.matrix,o=i.a,s=i.c,h=i.b,l=i.d,i=0<o*l-s*h?tt.e.degRad:-tt.e.degRad,c=this.data.offsetRotation*i,u=this.data.offsetShearY*i,d=this.bones,f=0,p=d.length;f<p;f++){var m,g,v,y,E,x,w,b,S,I=d[f],T=!1,M=I.matrix;0!=t&&(m=M.a,x=M.c,g=M.b,w=M.d,(S=Math.atan2(h,o)-Math.atan2(g,m)+c)>tt.e.PI?S-=tt.e.PI2:S<-tt.e.PI&&(S+=tt.e.PI2),S*=t,y=Math.cos(S),v=Math.sin(S),M.a=y*m-v*g,M.c=y*x-v*w,M.b=v*m+y*g,M.d=v*x+y*w,T=!0),0!=e&&(y=this.temp,r.localToWorld(y.set(this.data.offsetX,this.data.offsetY)),M.tx+=(y.x-M.tx)*e,M.ty+=(y.y-M.ty)*e,T=!0),0<n&&(E=Math.sqrt(M.a*M.a+M.b*M.b),b=Math.sqrt(o*o+h*h),1e-5<E&&(E=(E+(b-E+this.data.offsetScaleX)*n)/E),M.a*=E,M.b*=E,E=Math.sqrt(M.c*M.c+M.d*M.d),b=Math.sqrt(s*s+l*l),1e-5<E&&(E=(E+(b-E+this.data.offsetScaleY)*n)/E),M.c*=E,M.d*=E,T=!0),0<a&&(x=M.c,w=M.d,b=Math.atan2(w,x),(S=Math.atan2(l,s)-Math.atan2(h,o)-(b-Math.atan2(M.b,M.a)))>tt.e.PI?S-=tt.e.PI2:S<-tt.e.PI&&(S+=tt.e.PI2),S=b+(S+u)*a,E=Math.sqrt(x*x+w*w),M.c=Math.cos(S)*E,M.d=Math.sin(S)*E,T=!0),T&&(I.appliedValid=!1)}},Re.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,a=this.shearMix,r=this.target,i=r.matrix,o=i.a,s=i.c,h=i.b,l=i.d,i=0<o*l-s*h?tt.e.degRad:-tt.e.degRad,c=this.data.offsetRotation*i,u=this.data.offsetShearY*i,d=this.bones,f=0,p=d.length;f<p;f++){var m,g,v,y,E,x,w,b,S=d[f],I=!1,T=S.matrix;0!=t&&(m=T.a,g=T.c,v=T.b,y=T.d,(E=Math.atan2(h,o)+c)>tt.e.PI?E-=tt.e.PI2:E<-tt.e.PI&&(E+=tt.e.PI2),E*=t,w=Math.cos(E),x=Math.sin(E),T.a=w*m-x*v,T.c=w*g-x*y,T.b=x*m+w*v,T.d=x*g+w*y,I=!0),0!=e&&(w=this.temp,r.localToWorld(w.set(this.data.offsetX,this.data.offsetY)),T.tx+=w.x*e,T.ty+=w.y*e,I=!0),0<n&&(b=(Math.sqrt(o*o+h*h)-1+this.data.offsetScaleX)*n+1,T.a*=b,T.b*=b,b=(Math.sqrt(s*s+l*l)-1+this.data.offsetScaleY)*n+1,T.c*=b,T.d*=b,I=!0),0<a&&((E=Math.atan2(l,s)-Math.atan2(h,o))>tt.e.PI?E-=tt.e.PI2:E<-tt.e.PI&&(E+=tt.e.PI2),g=T.c,y=T.d,E=Math.atan2(y,g)+(E-tt.e.PI/2+u)*a,b=Math.sqrt(g*g+y*y),T.c=Math.cos(E)*b,T.d=Math.sin(E)*b,I=!0),I&&(S.appliedValid=!1)}},Re.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,a=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var i=this.bones,o=0,s=i.length;o<s;o++){var h=i[o];h.appliedValid||h.updateAppliedTransform();var l,c=h.arotation;0!=t&&(l=r.arotation-c+this.data.offsetRotation,c+=(l-=360*(16384-(16384.499999999996-l/360|0)))*t);var u=h.ax,d=h.ay;0!=e&&(u+=(r.ax-u+this.data.offsetX)*e,d+=(r.ay-d+this.data.offsetY)*e);var f=h.ascaleX,p=h.ascaleY;0<n&&(1e-5<f&&(f=(f+(r.ascaleX-f+this.data.offsetScaleX)*n)/f),1e-5<p&&(p=(p+(r.ascaleY-p+this.data.offsetScaleY)*n)/p));var m=h.ashearY;0<a&&(l=r.ashearY-m+this.data.offsetShearY,l-=360*(16384-(16384.499999999996-l/360|0)),h.shearY+=l*a),h.updateWorldTransformWith(u,d,c,f,p,h.ashearX,m)}},Re.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,a=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var i=this.bones,o=0,s=i.length;o<s;o++){var h=i[o];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;0!=t&&(l+=(r.arotation+this.data.offsetRotation)*t);var c=h.ax,u=h.ay;0!=e&&(c+=(r.ax+this.data.offsetX)*e,u+=(r.ay+this.data.offsetY)*e);var d=h.ascaleX,f=h.ascaleY;0<n&&(1e-5<d&&(d*=(r.ascaleX-1+this.data.offsetScaleX)*n+1),1e-5<f&&(f*=(r.ascaleY-1+this.data.offsetScaleY)*n+1));var p=h.ashearY;0<a&&(p+=(r.ashearY+this.data.offsetShearY)*a),h.updateWorldTransformWith(c,u,l,d,f,h.ashearX,p)}},Re),se=(Ae.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,n=t.length;e<n;e++){var a=t[e];a.sorted=a.data.skinRequired,a.active=!a.sorted}if(null!=this.skin)for(var r=this.skin.bones,e=0,n=this.skin.bones.length;e<n;e++)for(a=this.bones[r[e].index];a.sorted=!1,a.active=!0,null!=(a=a.parent););var i=this.ikConstraints,o=this.transformConstraints,s=this.pathConstraints,h=i.length,l=o.length,c=s.length,u=h+l+c;t:for(e=0;e<u;e++){for(var d=0;d<h;d++){var f=i[d];if(f.data.order==e){this.sortIkConstraint(f);continue t}}for(d=0;d<l;d++)if((f=o[d]).data.order==e){this.sortTransformConstraint(f);continue t}for(d=0;d<c;d++)if((f=s[d]).data.order==e){this.sortPathConstraint(f);continue t}}for(e=0,n=t.length;e<n;e++)this.sortBone(t[e])},Ae.prototype.sortIkConstraint=function(t){var e,n,a;t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&tt.p.contains(this.skin.constraints,t.data,!0)),t.active&&(a=t.target,this.sortBone(a),n=(e=t.bones)[0],this.sortBone(n),1<e.length&&(a=e[e.length-1],-1<this._updateCache.indexOf(a)||this.updateCacheReset.push(a)),this._updateCache.push(t),this.sortReset(n.children),e[e.length-1].sorted=!0)},Ae.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||null!=this.skin&&tt.p.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,n=e.data.index,a=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,a),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,a);for(var r=0,i=this.data.skins.length;r<i;r++)this.sortPathConstraintAttachment(this.data.skins[r],n,a);e=e.getAttachment();e instanceof D&&this.sortPathConstraintAttachmentWith(e,a);for(var o=t.bones,s=o.length,r=0;r<s;r++)this.sortBone(o[r]);for(this._updateCache.push(t),r=0;r<s;r++)this.sortReset(o[r].children);for(r=0;r<s;r++)o[r].sorted=!0}},Ae.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&tt.p.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var a=0;a<n;a++){var r=e[a];this.sortBone(r.parent),-1<this._updateCache.indexOf(r)||this.updateCacheReset.push(r)}else for(a=0;a<n;a++)this.sortBone(e[a]);this._updateCache.push(t);for(var i=0;i<n;i++)this.sortReset(e[i].children);for(i=0;i<n;i++)e[i].sorted=!0}},Ae.prototype.sortPathConstraintAttachment=function(t,e,n){var a=t.attachments[e];if(a)for(var r in a)this.sortPathConstraintAttachmentWith(a[r],n)},Ae.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof D){var n=t.bones;if(null==n)this.sortBone(e);else for(var a=this.bones,r=0;r<n.length;)for(var i=n[r++],o=r+i;r<o;r++){var s=n[r];this.sortBone(a[s])}}},Ae.prototype.sortBone=function(t){var e;t.sorted||(null!=(e=t.parent)&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t))},Ae.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var a=t[e];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=!1)}},Ae.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,n=t.length;e<n;e++){var a=t[e];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY,a.appliedValid=!0}for(var r=this._updateCache,e=0,n=r.length;e<n;e++)r[e].update()},Ae.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},Ae.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();for(var a=this.ikConstraints,e=0,n=a.length;e<n;e++){var r=a[e];r.mix=r.data.mix,r.softness=r.data.softness,r.bendDirection=r.data.bendDirection,r.compress=r.data.compress,r.stretch=r.data.stretch}var i=this.transformConstraints;for(e=0,n=i.length;e<n;e++){var o=(r=i[e]).data;r.rotateMix=o.rotateMix,r.translateMix=o.translateMix,r.scaleMix=o.scaleMix,r.shearMix=o.shearMix}var s=this.pathConstraints;for(e=0,n=s.length;e<n;e++)o=(r=s[e]).data,r.position=o.position,r.spacing=o.spacing,r.rotateMix=o.rotateMix,r.translateMix=o.translateMix},Ae.prototype.setSlotsToSetupPose=function(){var t=this.slots;tt.p.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()},Ae.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},Ae.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,a=e.length;n<a;n++){var r=e[n];if(r.data.name==t)return r}return null},Ae.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,a=e.length;n<a;n++)if(e[n].data.name==t)return n;return-1},Ae.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,a=e.length;n<a;n++){var r=e[n];if(r.data.name==t)return r}return null},Ae.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,a=e.length;n<a;n++)if(e[n].data.name==t)return n;return-1},Ae.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},Ae.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,a=e.length;n<a;n++){var r=e[n],i=r.data.attachmentName;null==i||null!=(i=t.getAttachment(n,i))&&r.setAttachment(i)}this.skin=t,this.updateCache()}},Ae.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},Ae.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,e);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},Ae.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,a=0,r=n.length;a<r;a++){var i=n[a];if(i.data.name==t){var o=null;if(null!=e&&null==(o=this.getAttachment(a,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void i.setAttachment(o)}}throw new Error("Slot not found: "+t)},Ae.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.data.name==t)return r}return null},Ae.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.data.name==t)return r}return null},Ae.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.data.name==t)return r}return null},Ae.prototype.getBounds=function(t,e,n){if(void 0===n&&(n=new Array(2)),null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var a=this.drawOrder,r=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,h=0,l=a.length;h<l;h++){var c=a[h];if(c.bone.active){var u=0,d=null,f=c.getAttachment();if(f instanceof x?(d=tt.p.setArraySize(n,u=8,0),f.computeWorldVertices(c.bone,d,0,2)):f instanceof y&&(u=(f=f).worldVerticesLength,d=tt.p.setArraySize(n,u,0),f.computeWorldVertices(c,0,u,d,0,2)),null!=d)for(var p=0,m=d.length;p<m;p+=2)var g=d[p],v=d[p+1],r=Math.min(r,g),i=Math.min(i,v),o=Math.max(o,g),s=Math.max(s,v)}}t.set(r,i),e.set(o-r,s-i)},Ae.prototype.update=function(t){this.time+=t},Object.defineProperty(Ae.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(t){Ae.deprecatedWarning1||(Ae.deprecatedWarning1=!0),this.scaleX=t?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(Ae.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(t){Ae.deprecatedWarning1||(Ae.deprecatedWarning1=!0),this.scaleY=t?1:-1},enumerable:!1,configurable:!0}),Ae.deprecatedWarning1=!1,Ae),he=(Me.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},Me.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,a=e.length;n<a;n++)if(e[n].name==t)return n;return-1},Me.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},Me.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,a=e.length;n<a;n++)if(e[n].name==t)return n;return-1},Me.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},Me.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},Me.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},Me.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},Me.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},Me.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},Me.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,a=e.length;n<a;n++)if(e[n].name==t)return n;return-1},Me),le=function(t,e,n){if(this.color=new tt.c(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=n},ce=(o(Te,ae=qt),Te),ue=function(t,e,n){this.slotIndex=t,this.name=e,this.attachment=n},de=(Ie.prototype.setAttachment=function(t,e,n){if(null==n)throw new Error("attachment cannot be null.");var a=this.attachments;t>=a.length&&(a.length=t+1),a[t]||(a[t]={}),a[t][e]=n},Ie.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],a=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==n){a=!0;break}a||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){for(var i=t.constraints[e],a=!1,r=0;r<this.constraints.length;r++)if(this.constraints[r]==i){a=!0;break}a||this.constraints.push(i)}for(var o=t.getAttachments(),e=0;e<o.length;e++){var s=o[e];this.setAttachment(s.slotIndex,s.name,s.attachment)}},Ie.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],a=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==n){a=!0;break}a||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){for(var i=t.constraints[e],a=!1,r=0;r<this.constraints.length;r++)if(this.constraints[r]==i){a=!0;break}a||this.constraints.push(i)}for(var o=t.getAttachments(),e=0;e<o.length;e++){var s=o[e];null!=s.attachment&&(s.attachment instanceof y?s.attachment=s.attachment.newLinkedMesh():s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment))}},Ie.prototype.getAttachment=function(t,e){t=this.attachments[t];return t?t[e]:null},Ie.prototype.removeAttachment=function(t,e){t=this.attachments[t];t&&(t[e]=null)},Ie.prototype.getAttachments=function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var n=this.attachments[e];if(n)for(var a in n){var r=n[a];r&&t.push(new ue(e,a,r))}}return t},Ie.prototype.getAttachmentsForSlot=function(t,e){var n=this.attachments[t];if(n)for(var a in n){var r=n[a];r&&e.push(new ue(t,a,r))}},Ie.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},Ie.prototype.attachAll=function(t,e){for(var n=0,a=0;a<t.slots.length;a++){var r=t.slots[a],i=r.getAttachment();if(i&&n<e.attachments.length){var o,s=e.attachments[n];for(o in s)if(i==s[o]){var h=this.getAttachment(n,o);null!=h&&r.setAttachment(h);break}}n++}},Ie),fe=(Se.prototype.readSkeletonData=function(t){var e=this.scale,n=new he;n.name="";var a=new tt.b(t);n.hash=a.readString(),n.version=a.readString(),n.version,n.x=a.readFloat(),n.y=a.readFloat(),n.width=a.readFloat(),n.height=a.readFloat();var r=a.readBoolean();r&&(n.fps=a.readFloat(),n.imagesPath=a.readString(),n.audioPath=a.readString());for(var i=0,i=a.readInt(!0),o=0;o<i;o++)a.strings.push(a.readString());for(i=a.readInt(!0),o=0;o<i;o++){var s=a.readString(),h=0==o?null:n.bones[a.readInt(!0)],l=new Wt(o,s,h);l.rotation=a.readFloat(),l.x=a.readFloat()*e,l.y=a.readFloat()*e,l.scaleX=a.readFloat(),l.scaleY=a.readFloat(),l.shearX=a.readFloat(),l.shearY=a.readFloat(),l.length=a.readFloat()*e,l.transformMode=Se.TransformModeValues[a.readInt(!0)],l.skinRequired=a.readBoolean(),r&&tt.c.rgba8888ToColor(l.color,a.readInt32()),n.bones.push(l)}for(i=a.readInt(!0),o=0;o<i;o++){var c=a.readString(),u=n.bones[a.readInt(!0)],l=new le(o,c,u);tt.c.rgba8888ToColor(l.color,a.readInt32());u=a.readInt32();-1!=u&&tt.c.rgb888ToColor(l.darkColor=new tt.c,u),l.attachmentName=a.readStringRef(),l.blendMode=Se.BlendModeValues[a.readInt(!0)],n.slots.push(l)}i=a.readInt(!0);for(var o=0,d=void 0;o<i;o++){(l=new Gt(a.readString())).order=a.readInt(!0),l.skinRequired=a.readBoolean();for(var d=a.readInt(!0),f=0;f<d;f++)l.bones.push(n.bones[a.readInt(!0)]);l.target=n.bones[a.readInt(!0)],l.mix=a.readFloat(),l.softness=a.readFloat()*e,l.bendDirection=a.readByte(),l.compress=a.readBoolean(),l.stretch=a.readBoolean(),l.uniform=a.readBoolean(),n.ikConstraints.push(l)}for(i=a.readInt(!0),d=void(o=0);o<i;o++){for((l=new ce(a.readString())).order=a.readInt(!0),l.skinRequired=a.readBoolean(),d=a.readInt(!0),f=0;f<d;f++)l.bones.push(n.bones[a.readInt(!0)]);l.target=n.bones[a.readInt(!0)],l.local=a.readBoolean(),l.relative=a.readBoolean(),l.offsetRotation=a.readFloat(),l.offsetX=a.readFloat()*e,l.offsetY=a.readFloat()*e,l.offsetScaleX=a.readFloat(),l.offsetScaleY=a.readFloat(),l.offsetShearY=a.readFloat(),l.rotateMix=a.readFloat(),l.translateMix=a.readFloat(),l.scaleMix=a.readFloat(),l.shearMix=a.readFloat(),n.transformConstraints.push(l)}for(i=a.readInt(!0),d=void(o=0);o<i;o++){for((l=new Zt(a.readString())).order=a.readInt(!0),l.skinRequired=a.readBoolean(),d=a.readInt(!0),f=0;f<d;f++)l.bones.push(n.bones[a.readInt(!0)]);l.target=n.slots[a.readInt(!0)],l.positionMode=Se.PositionModeValues[a.readInt(!0)],l.spacingMode=Se.SpacingModeValues[a.readInt(!0)],l.rotateMode=Se.RotateModeValues[a.readInt(!0)],l.offsetRotation=a.readFloat(),l.position=a.readFloat(),l.positionMode==tt.i.Fixed&&(l.position*=e),l.spacing=a.readFloat(),l.spacingMode!=_t.Length&&l.spacingMode!=_t.Fixed||(l.spacing*=e),l.rotateMix=a.readFloat(),l.translateMix=a.readFloat(),n.pathConstraints.push(l)}t=this.readSkin(a,n,!0,r);for(null!=t&&(n.defaultSkin=t,n.skins.push(t)),o=n.skins.length,tt.p.setArraySize(n.skins,i=o+a.readInt(!0));o<i;o++)n.skins[o]=this.readSkin(a,n,!1,r);for(i=this.linkedMeshes.length,o=0;o<i;o++){var p=this.linkedMeshes[o],m=null==p.skin?n.defaultSkin:n.findSkin(p.skin);if(null==m)throw new Error("Skin not found: "+p.skin);m=m.getAttachment(p.slotIndex,p.parent);if(null==m)throw new Error("Parent mesh not found: "+p.parent);p.mesh.deformAttachment=p.inheritDeform?m:p.mesh,p.mesh.setParentMesh(m)}for(this.linkedMeshes.length=0,i=a.readInt(!0),o=0;o<i;o++)(l=new Ht(a.readStringRef())).intValue=a.readInt(!1),l.floatValue=a.readFloat(),l.stringValue=a.readString(),l.audioPath=a.readString(),null!=l.audioPath&&(l.volume=a.readFloat(),l.balance=a.readFloat()),n.events.push(l);for(i=a.readInt(!0),o=0;o<i;o++)n.animations.push(this.readAnimation(a,a.readString(),n));return n},Se.prototype.readSkin=function(t,e,n,a){var r=null,i=0;if(n){if(0==(i=t.readInt(!0)))return null;r=new de("default")}else{(r=new de(t.readStringRef())).bones.length=t.readInt(!0);for(var o=0,s=r.bones.length;o<s;o++)r.bones[o]=e.bones[t.readInt(!0)];for(s=t.readInt(!(o=0));o<s;o++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(s=t.readInt(!(o=0));o<s;o++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(s=t.readInt(!(o=0));o<s;o++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);i=t.readInt(!0)}for(o=0;o<i;o++)for(var h=t.readInt(!0),l=0,c=t.readInt(!0);l<c;l++){var u=t.readStringRef(),d=this.readAttachment(t,e,r,h,u,a);null!=d&&r.setAttachment(h,u,d)}return r},Se.prototype.readAttachment=function(t,e,n,a,r,i){var o=this.scale,s=t.readStringRef();null==s&&(s=r);r=t.readByte();switch(Se.AttachmentTypeValues[r]){case tt.a.Region:var h=t.readStringRef(),l=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readFloat(),f=t.readFloat(),p=t.readFloat(),m=t.readFloat(),g=t.readInt32();null==h&&(h=s);var v=this.attachmentLoader.newRegionAttachment(n,s,h);return null==v?null:(v.path=h,v.x=c*o,v.y=u*o,v.scaleX=d,v.scaleY=f,v.rotation=l,v.width=p*o,v.height=m*o,tt.c.rgba8888ToColor(v.color,g),v);case tt.a.BoundingBox:var y=t.readInt(!0),E=this.readVertices(t,y),x=(g=i?t.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(n,s));return null==x?null:(x.worldVerticesLength=y<<1,x.vertices=E.vertices,x.bones=E.bones,i&&tt.c.rgba8888ToColor(x.color,g),x);case tt.a.Mesh:var h=t.readStringRef(),g=t.readInt32(),y=t.readInt(!0),v=this.readFloatArray(t,y<<1,1),x=this.readShortArray(t),w=(E=this.readVertices(t,y),t.readInt(!0)),b=null,p=0,m=0;i&&(b=this.readShortArray(t),p=t.readFloat(),m=t.readFloat()),null==h&&(h=s);var S=this.attachmentLoader.newMeshAttachment(n,s,h);return null==S?null:(S.path=h,tt.c.rgba8888ToColor(S.color,g),S.bones=E.bones,S.vertices=E.vertices,S.worldVerticesLength=y<<1,S.triangles=x,S.regionUVs=new Float32Array(v),S.hullLength=w<<1,i&&(S.edges=b,S.width=p*o,S.height=m*o),S);case tt.a.LinkedMesh:h=t.readStringRef(),g=t.readInt32();var w=t.readStringRef(),b=t.readStringRef(),I=t.readBoolean();return m=p=0,i&&(p=t.readFloat(),m=t.readFloat()),null==h&&(h=s),null==(S=this.attachmentLoader.newMeshAttachment(n,s,h))?null:(S.path=h,tt.c.rgba8888ToColor(S.color,g),i&&(S.width=p*o,S.height=m*o),this.linkedMeshes.push(new pe(S,w,a,b,I)),S);case tt.a.Path:for(var I=t.readBoolean(),S=t.readBoolean(),T=(y=t.readInt(!0),E=this.readVertices(t,y),tt.p.newArray(y/3,0)),M=0,A=T.length;M<A;M++)T[M]=t.readFloat()*o;return g=i?t.readInt32():0,null==(h=this.attachmentLoader.newPathAttachment(n,s))?null:(h.closed=I,h.constantSpeed=S,h.worldVerticesLength=y<<1,h.vertices=E.vertices,h.bones=E.bones,h.lengths=T,i&&tt.c.rgba8888ToColor(h.color,g),h);case tt.a.Point:l=t.readFloat(),c=t.readFloat(),u=t.readFloat(),g=i?t.readInt32():0;var R=this.attachmentLoader.newPointAttachment(n,s);return null==R?null:(R.x=c*o,R.y=u*o,R.rotation=l,i&&tt.c.rgba8888ToColor(R.color,g),R);case tt.a.Clipping:l=t.readInt(!0),R=(y=t.readInt(!0),E=this.readVertices(t,y),g=i?t.readInt32():0,this.attachmentLoader.newClippingAttachment(n,s));return null==R?null:(R.endSlot=e.slots[l],R.worldVerticesLength=y<<1,R.vertices=E.vertices,R.bones=E.bones,i&&tt.c.rgba8888ToColor(R.color,g),R)}return null},Se.prototype.readVertices=function(t,e){var n=e<<1,a=new me,r=this.scale;if(!t.readBoolean())return a.vertices=this.readFloatArray(t,n,r),a;for(var i=new Array,o=new Array,s=0;s<e;s++){var h=t.readInt(!0);o.push(h);for(var l=0;l<h;l++)o.push(t.readInt(!0)),i.push(t.readFloat()*r),i.push(t.readFloat()*r),i.push(t.readFloat())}return a.vertices=tt.p.toFloatArray(i),a.bones=o,a},Se.prototype.readFloatArray=function(t,e,n){var a=new Array(e);if(1==n)for(var r=0;r<e;r++)a[r]=t.readFloat();else for(r=0;r<e;r++)a[r]=t.readFloat()*n;return a},Se.prototype.readShortArray=function(t){for(var e=t.readInt(!0),n=new Array(e),a=0;a<e;a++)n[a]=t.readShort();return n},Se.prototype.readAnimation=function(t,e,n){for(var a=new Array,r=this.scale,i=0,o=new tt.c,s=new tt.c,h=0,l=t.readInt(!0);h<l;h++)for(var c=t.readInt(!0),u=0,d=t.readInt(!0);u<d;u++){var f=t.readByte(),p=t.readInt(!0);switch(f){case Se.SLOT_ATTACHMENT:var m=new ht(p);m.slotIndex=c;for(var g=0;g<p;g++)m.setFrame(g,t.readFloat(),t.readStringRef());a.push(m),i=Math.max(i,m.frames[p-1]);break;case Se.SLOT_COLOR:for((m=new ot(p)).slotIndex=c,g=0;g<p;g++){var v=t.readFloat();tt.c.rgba8888ToColor(o,t.readInt32()),m.setFrame(g,v,o.r,o.g,o.b,o.a),g<p-1&&this.readCurve(t,g,m)}a.push(m),i=Math.max(i,m.frames[(p-1)*ot.ENTRIES]);break;case Se.SLOT_TWO_COLOR:for((m=new st(p)).slotIndex=c,g=0;g<p;g++)v=t.readFloat(),tt.c.rgba8888ToColor(o,t.readInt32()),tt.c.rgb888ToColor(s,t.readInt32()),m.setFrame(g,v,o.r,o.g,o.b,o.a,s.r,s.g,s.b),g<p-1&&this.readCurve(t,g,m);a.push(m),i=Math.max(i,m.frames[(p-1)*st.ENTRIES])}}for(l=t.readInt(!(h=0));h<l;h++)for(var y=t.readInt(!0),u=0,d=t.readInt(!0);u<d;u++)switch(f=t.readByte(),p=t.readInt(!0),f){case Se.BONE_ROTATE:for((m=new nt(p)).boneIndex=y,g=0;g<p;g++)m.setFrame(g,t.readFloat(),t.readFloat()),g<p-1&&this.readCurve(t,g,m);a.push(m),i=Math.max(i,m.frames[(p-1)*nt.ENTRIES]);break;case Se.BONE_TRANSLATE:case Se.BONE_SCALE:case Se.BONE_SHEAR:var m=void 0,E=1;for(f==Se.BONE_SCALE?m=new rt(p):f==Se.BONE_SHEAR?m=new it(p):(m=new at(p),E=r),m.boneIndex=y,g=0;g<p;g++)m.setFrame(g,t.readFloat(),t.readFloat()*E,t.readFloat()*E),g<p-1&&this.readCurve(t,g,m);a.push(m),i=Math.max(i,m.frames[(p-1)*at.ENTRIES])}for(l=t.readInt(!(h=0));h<l;h++){var x=t.readInt(!0),p=t.readInt(!0);for((m=new dt(p)).ikConstraintIndex=x,g=0;g<p;g++)m.setFrame(g,t.readFloat(),t.readFloat(),t.readFloat()*r,t.readByte(),t.readBoolean(),t.readBoolean()),g<p-1&&this.readCurve(t,g,m);a.push(m),i=Math.max(i,m.frames[(p-1)*dt.ENTRIES])}for(l=t.readInt(!(h=0));h<l;h++){for(x=t.readInt(!0),p=t.readInt(!0),(m=new ft(p)).transformConstraintIndex=x,g=0;g<p;g++)m.setFrame(g,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat()),g<p-1&&this.readCurve(t,g,m);a.push(m),i=Math.max(i,m.frames[(p-1)*ft.ENTRIES])}for(l=t.readInt(!(h=0));h<l;h++){var x=t.readInt(!0),w=n.pathConstraints[x];for(d=t.readInt(!(u=0));u<d;u++)switch(f=t.readByte(),p=t.readInt(!0),f){case Se.PATH_POSITION:case Se.PATH_SPACING:for(m=void 0,E=1,f==Se.PATH_SPACING?(m=new mt(p),w.spacingMode!=_t.Length&&w.spacingMode!=_t.Fixed||(E=r)):(m=new pt(p),w.positionMode==tt.i.Fixed&&(E=r)),m.pathConstraintIndex=x,g=0;g<p;g++)m.setFrame(g,t.readFloat(),t.readFloat()*E),g<p-1&&this.readCurve(t,g,m);a.push(m),i=Math.max(i,m.frames[(p-1)*pt.ENTRIES]);break;case Se.PATH_MIX:for((m=new gt(p)).pathConstraintIndex=x,g=0;g<p;g++)m.setFrame(g,t.readFloat(),t.readFloat(),t.readFloat()),g<p-1&&this.readCurve(t,g,m);a.push(m),i=Math.max(i,m.frames[(p-1)*gt.ENTRIES])}}for(l=t.readInt(!(h=0));h<l;h++){var b=n.skins[t.readInt(!0)];for(d=t.readInt(!(u=0));u<d;u++)for(var c=t.readInt(!0),S=0,I=t.readInt(!0);S<I;S++){var T=b.getAttachment(c,t.readStringRef()),M=null!=T.bones,A=T.vertices,R=M?A.length/3*2:A.length;for(p=t.readInt(!0),(m=new lt(p)).slotIndex=c,m.attachment=T,g=0;g<p;g++){var v=t.readFloat(),C=void 0,V=t.readInt(!0);if(0==V)C=M?tt.p.newFloatArray(R):A;else{var C=tt.p.newFloatArray(R),k=t.readInt(!0);if(V+=k,1==r)for(var P=k;P<V;P++)C[P]=t.readFloat();else for(P=k;P<V;P++)C[P]=t.readFloat()*r;if(!M)for(var P=0,F=C.length;P<F;P++)C[P]+=A[P]}m.setFrame(g,v,C),g<p-1&&this.readCurve(t,g,m)}a.push(m),i=Math.max(i,m.frames[p-1])}}var N=t.readInt(!0);if(0<N){m=new ut(N);for(var _=n.slots.length,h=0;h<N;h++){v=t.readFloat();var Y=t.readInt(!0),X=tt.p.newArray(_,0);for(u=_-1;0<=u;u--)X[u]=-1;var O=tt.p.newArray(_-Y,0),B=0,D=0;for(u=0;u<Y;u++){for(c=t.readInt(!0);B!=c;)O[D++]=B++;X[B+t.readInt(!0)]=B++}for(;B<_;)O[D++]=B++;for(u=_-1;0<=u;u--)-1==X[u]&&(X[u]=O[--D]);m.setFrame(h,v,X)}a.push(m),i=Math.max(i,m.frames[N-1])}var L=t.readInt(!0);if(0<L){for(m=new ct(L),h=0;h<L;h++){v=t.readFloat();var W=n.events[t.readInt(!0)],q=new Ut(v,W);q.intValue=t.readInt(!1),q.floatValue=t.readFloat(),q.stringValue=t.readBoolean()?t.readString():W.stringValue,null!=q.data.audioPath&&(q.volume=t.readFloat(),q.balance=t.readFloat()),m.setFrame(h,q)}a.push(m),i=Math.max(i,m.frames[L-1])}return new et(e,a,i)},Se.prototype.readCurve=function(t,e,n){switch(t.readByte()){case Se.CURVE_STEPPED:n.setStepped(e);break;case Se.CURVE_BEZIER:this.setCurve(n,e,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},Se.prototype.setCurve=function(t,e,n,a,r,i){t.setCurve(e,n,a,r,i)},Se.AttachmentTypeValues=[0,1,2,3,4,5,6],Se.TransformModeValues=[tt.o.Normal,tt.o.OnlyTranslation,tt.o.NoRotationOrReflection,tt.o.NoScale,tt.o.NoScaleOrReflection],Se.PositionModeValues=[tt.i.Fixed,tt.i.Percent],Se.SpacingModeValues=[_t.Length,_t.Fixed,_t.Percent],Se.RotateModeValues=[tt.k.Tangent,tt.k.Chain,tt.k.ChainScale],Se.BlendModeValues=[r.b.NORMAL,r.b.ADD,r.b.MULTIPLY,r.b.SCREEN],Se.BONE_ROTATE=0,Se.BONE_TRANSLATE=1,Se.BONE_SCALE=2,Se.BONE_SHEAR=3,Se.SLOT_ATTACHMENT=0,Se.SLOT_COLOR=1,Se.SLOT_TWO_COLOR=2,Se.PATH_POSITION=0,Se.PATH_SPACING=1,Se.PATH_MIX=2,Se.CURVE_LINEAR=0,Se.CURVE_STEPPED=1,Se.CURVE_BEZIER=2,Se),pe=function(t,e,n,a,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=a,this.inheritDeform=r},me=function(t,e){void 0===e&&(e=null),this.bones=t=void 0===t?null:t,this.vertices=e},ge=(be.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,a=this.polygons,r=this.polygonPool,i=t.slots,o=i.length;n.length=0,r.freeAll(a);for(var s=a.length=0;s<o;s++){var h,l,c=i[s];!c.bone.active||(l=c.getAttachment())instanceof g&&(n.push(h=l),(l=r.obtain()).length!=h.worldVerticesLength&&(l=tt.p.newFloatArray(h.worldVerticesLength)),a.push(l),h.computeWorldVertices(c,0,h.worldVerticesLength,l,0,2))}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},be.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,r=this.polygons,i=0,o=r.length;i<o;i++)for(var s=r[i],h=s,l=0,c=s.length;l<c;l+=2)var u=h[l],d=h[l+1],t=Math.min(t,u),e=Math.min(e,d),n=Math.max(n,u),a=Math.max(a,d);this.minX=t,this.minY=e,this.maxX=n,this.maxY=a},be.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},be.prototype.aabbIntersectsSegment=function(t,e,n,a){var r=this.minX,i=this.minY,o=this.maxX,s=this.maxY;if(t<=r&&n<=r||e<=i&&a<=i||o<=t&&o<=n||s<=e&&s<=a)return!1;a=(a-e)/(n-t),n=a*(r-t)+e;if(i<n&&n<s)return!0;if(i<(n=a*(o-t)+e)&&n<s)return!0;i=(i-e)/a+t;return r<i&&i<o||r<(i=(s-e)/a+t)&&i<o},be.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},be.prototype.containsPoint=function(t,e){for(var n=this.polygons,a=0,r=n.length;a<r;a++)if(this.containsPointPolygon(n[a],t,e))return this.boundingBoxes[a];return null},be.prototype.containsPointPolygon=function(t,e,n){for(var a=t,r=t.length,i=r-2,o=!1,s=0;s<r;s+=2){var h,l=a[s+1],c=a[i+1];!(l<n&&n<=c||c<n&&n<=l)||(h=a[s])+(n-l)/(c-l)*(a[i]-h)<e&&(o=!o),i=s}return o},be.prototype.intersectsSegment=function(t,e,n,a){for(var r=this.polygons,i=0,o=r.length;i<o;i++)if(this.intersectsSegmentPolygon(r[i],t,e,n,a))return this.boundingBoxes[i];return null},be.prototype.intersectsSegmentPolygon=function(t,e,n,a,r){for(var i=t,o=t.length,s=e-a,h=n-r,l=e*r-n*a,c=i[o-2],u=i[o-1],d=0;d<o;d+=2){var f=i[d],p=i[d+1],m=c*p-u*f,g=c-f,v=u-p,y=s*v-h*g,g=(l*g-s*m)/y;if((c<=g&&g<=f||f<=g&&g<=c)&&(e<=g&&g<=a||a<=g&&g<=e)){y=(l*v-h*m)/y;if((u<=y&&y<=p||p<=y&&y<=u)&&(n<=y&&y<=r||r<=y&&y<=n))return!0}c=f,u=p}return!1},be.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");t=this.boundingBoxes.indexOf(t);return-1==t?null:this.polygons[t]},be.prototype.getWidth=function(){return this.maxX-this.minX},be.prototype.getHeight=function(){return this.maxY-this.minY},be),ve=(we.prototype.readSkeletonData=function(t){var e=this.scale,n=new he,a="string"==typeof t?JSON.parse(t):t,t=a.skeleton;if(null!=t&&(n.hash=t.hash,n.version=t.spine,"3.8"!==n.version.substr(0,3)&&t.spine,"3.8.75"===n.version&&0,n.x=t.x,n.y=t.y,n.width=t.width,n.height=t.height,n.fps=t.fps,n.imagesPath=t.images),a.bones)for(var r=0;r<a.bones.length;r++){var i=a.bones[r],o=null,s=this.getValue(i,"parent",null);if(null!=s&&null==(o=n.findBone(s)))throw new Error("Parent bone not found: "+s);var h=new Wt(n.bones.length,i.name,o);h.length=this.getValue(i,"length",0)*e,h.x=this.getValue(i,"x",0)*e,h.y=this.getValue(i,"y",0)*e,h.rotation=this.getValue(i,"rotation",0),h.scaleX=this.getValue(i,"scaleX",1),h.scaleY=this.getValue(i,"scaleY",1),h.shearX=this.getValue(i,"shearX",0),h.shearY=this.getValue(i,"shearY",0),h.transformMode=we.transformModeFromString(this.getValue(i,"transform","normal")),h.skinRequired=this.getValue(i,"skin",!1),n.bones.push(h)}if(a.slots)for(r=0;r<a.slots.length;r++){var l=a.slots[r],c=l.name,u=l.bone,d=n.findBone(u);if(null==d)throw new Error("Slot bone not found: "+u);h=new le(n.slots.length,c,d),d=this.getValue(l,"color",null);null!=d&&h.color.setFromString(d);d=this.getValue(l,"dark",null);null!=d&&(h.darkColor=new tt.c(1,1,1,1),h.darkColor.setFromString(d)),h.attachmentName=this.getValue(l,"attachment",null),h.blendMode=we.blendModeFromString(this.getValue(l,"blend","normal")),n.slots.push(h)}if(a.ik)for(r=0;r<a.ik.length;r++){var f=a.ik[r];(h=new Gt(f.name)).order=this.getValue(f,"order",0),h.skinRequired=this.getValue(f,"skin",!1);for(var p=0;p<f.bones.length;p++){var u=f.bones[p],m=n.findBone(u);if(null==m)throw new Error("IK bone not found: "+u);h.bones.push(m)}var g=f.target;if(h.target=n.findBone(g),null==h.target)throw new Error("IK target bone not found: "+g);h.mix=this.getValue(f,"mix",1),h.softness=this.getValue(f,"softness",0)*e,h.bendDirection=this.getValue(f,"bendPositive",!0)?1:-1,h.compress=this.getValue(f,"compress",!1),h.stretch=this.getValue(f,"stretch",!1),h.uniform=this.getValue(f,"uniform",!1),n.ikConstraints.push(h)}if(a.transform)for(r=0;r<a.transform.length;r++){for(f=a.transform[r],(h=new ce(f.name)).order=this.getValue(f,"order",0),h.skinRequired=this.getValue(f,"skin",!1),p=0;p<f.bones.length;p++){if(u=f.bones[p],null==(m=n.findBone(u)))throw new Error("Transform constraint bone not found: "+u);h.bones.push(m)}if(g=f.target,h.target=n.findBone(g),null==h.target)throw new Error("Transform constraint target bone not found: "+g);h.local=this.getValue(f,"local",!1),h.relative=this.getValue(f,"relative",!1),h.offsetRotation=this.getValue(f,"rotation",0),h.offsetX=this.getValue(f,"x",0)*e,h.offsetY=this.getValue(f,"y",0)*e,h.offsetScaleX=this.getValue(f,"scaleX",0),h.offsetScaleY=this.getValue(f,"scaleY",0),h.offsetShearY=this.getValue(f,"shearY",0),h.rotateMix=this.getValue(f,"rotateMix",1),h.translateMix=this.getValue(f,"translateMix",1),h.scaleMix=this.getValue(f,"scaleMix",1),h.shearMix=this.getValue(f,"shearMix",1),n.transformConstraints.push(h)}if(a.path)for(r=0;r<a.path.length;r++){for(f=a.path[r],(h=new Zt(f.name)).order=this.getValue(f,"order",0),h.skinRequired=this.getValue(f,"skin",!1),p=0;p<f.bones.length;p++){if(u=f.bones[p],null==(m=n.findBone(u)))throw new Error("Transform constraint bone not found: "+u);h.bones.push(m)}if(g=f.target,h.target=n.findSlot(g),null==h.target)throw new Error("Path target slot not found: "+g);h.positionMode=we.positionModeFromString(this.getValue(f,"positionMode","percent")),h.spacingMode=we.spacingModeFromString(this.getValue(f,"spacingMode","length")),h.rotateMode=we.rotateModeFromString(this.getValue(f,"rotateMode","tangent")),h.offsetRotation=this.getValue(f,"rotation",0),h.position=this.getValue(f,"position",0),h.positionMode==tt.i.Fixed&&(h.position*=e),h.spacing=this.getValue(f,"spacing",0),h.spacingMode!=_t.Length&&h.spacingMode!=_t.Fixed||(h.spacing*=e),h.rotateMix=this.getValue(f,"rotateMix",1),h.translateMix=this.getValue(f,"translateMix",1),n.pathConstraints.push(h)}if(a.skins)for(r=0;r<a.skins.length;r++){var v=a.skins[r],y=new de(v.name);if(v.bones)for(var E=0;E<v.bones.length;E++){if(null==(m=n.findBone(v.bones[E])))throw new Error("Skin bone not found: "+v.bones[r]);y.bones.push(m)}if(v.ik)for(E=0;E<v.ik.length;E++){var x=n.findIkConstraint(v.ik[E]);if(null==x)throw new Error("Skin IK constraint not found: "+v.ik[r]);y.constraints.push(x)}if(v.transform)for(E=0;E<v.transform.length;E++){if(null==(x=n.findTransformConstraint(v.transform[E])))throw new Error("Skin transform constraint not found: "+v.transform[r]);y.constraints.push(x)}if(v.path)for(E=0;E<v.path.length;E++){if(null==(x=n.findPathConstraint(v.path[E])))throw new Error("Skin path constraint not found: "+v.path[r]);y.constraints.push(x)}for(c in v.attachments){var w,b=n.findSlot(c);if(null==b)throw new Error("Slot not found: "+c);for(w in l=v.attachments[c]){var S=this.readAttachment(l[w],y,b.index,w,n);null!=S&&y.setAttachment(b.index,w,S)}}n.skins.push(y),"default"==y.name&&(n.defaultSkin=y)}for(var r=0,I=this.linkedMeshes.length;r<I;r++){var T=this.linkedMeshes[r];if(null==(y=null==T.skin?n.defaultSkin:n.findSkin(T.skin)))throw new Error("Skin not found: "+T.skin);var M=y.getAttachment(T.slotIndex,T.parent);if(null==M)throw new Error("Parent mesh not found: "+T.parent);T.mesh.deformAttachment=T.inheritDeform?M:T.mesh,T.mesh.setParentMesh(M)}if(this.linkedMeshes.length=0,a.events)for(var A in a.events){var R=a.events[A];(h=new Ht(A)).intValue=this.getValue(R,"int",0),h.floatValue=this.getValue(R,"float",0),h.stringValue=this.getValue(R,"string",""),h.audioPath=this.getValue(R,"audio",null),null!=h.audioPath&&(h.volume=this.getValue(R,"volume",1),h.balance=this.getValue(R,"balance",0)),n.events.push(h)}if(a.animations)for(var C in a.animations){var V=a.animations[C];this.readAnimation(V,C,n)}return n},we.prototype.readAttachment=function(t,e,n,a,r){var i=this.scale;switch(a=this.getValue(t,"name",a),this.getValue(t,"type","region")){case"region":var o=this.getValue(t,"path",a),s=this.attachmentLoader.newRegionAttachment(e,a,o);if(null==s)return null;s.path=o,s.x=this.getValue(t,"x",0)*i,s.y=this.getValue(t,"y",0)*i,s.scaleX=this.getValue(t,"scaleX",1),s.scaleY=this.getValue(t,"scaleY",1),s.rotation=this.getValue(t,"rotation",0),s.width=t.width*i,s.height=t.height*i;var h=this.getValue(t,"color",null);return null!=h&&s.color.setFromString(h),s;case"boundingbox":var l=this.attachmentLoader.newBoundingBoxAttachment(e,a);return null==l?null:(this.readVertices(t,l,t.vertexCount<<1),null!=(h=this.getValue(t,"color",null))&&l.color.setFromString(h),l);case"mesh":case"linkedmesh":var o=this.getValue(t,"path",a),c=this.attachmentLoader.newMeshAttachment(e,a,o);if(null==c)return null;c.path=o,null!=(h=this.getValue(t,"color",null))&&c.color.setFromString(h),c.width=this.getValue(t,"width",0)*i,c.height=this.getValue(t,"height",0)*i;l=this.getValue(t,"parent",null);if(null!=l)return this.linkedMeshes.push(new ye(c,this.getValue(t,"skin",null),n,l,this.getValue(t,"deform",!0))),c;l=t.uvs;return this.readVertices(t,c,l.length),c.triangles=t.triangles,c.regionUVs=new Float32Array(l),c.edges=this.getValue(t,"edges",null),c.hullLength=2*this.getValue(t,"hull",0),c;case"path":if(null==(o=this.attachmentLoader.newPathAttachment(e,a)))return null;o.closed=this.getValue(t,"closed",!1),o.constantSpeed=this.getValue(t,"constantSpeed",!0);var u=t.vertexCount;this.readVertices(t,o,u<<1);for(var d=tt.p.newArray(u/3,0),f=0;f<t.lengths.length;f++)d[f]=t.lengths[f]*i;return o.lengths=d,null!=(h=this.getValue(t,"color",null))&&o.color.setFromString(h),o;case"point":var p=this.attachmentLoader.newPointAttachment(e,a);return null==p?null:(p.x=this.getValue(t,"x",0)*i,p.y=this.getValue(t,"y",0)*i,p.rotation=this.getValue(t,"rotation",0),null!=(h=this.getValue(t,"color",null))&&p.color.setFromString(h),p);case"clipping":c=this.attachmentLoader.newClippingAttachment(e,a);if(null==c)return null;o=this.getValue(t,"end",null);if(null!=o){p=r.findSlot(o);if(null==p)throw new Error("Clipping end slot not found: "+o);c.endSlot=p}return u=t.vertexCount,this.readVertices(t,c,u<<1),null!=(h=this.getValue(t,"color",null))&&c.color.setFromString(h),c}return null},we.prototype.readVertices=function(t,e,n){var a=this.scale;e.worldVerticesLength=n;var r=t.vertices;if(n!=r.length){for(var i=new Array,o=new Array,s=0,h=r.length;s<h;){var l=r[s++];o.push(l);for(var c=s+4*l;s<c;s+=4)o.push(r[s]),i.push(r[s+1]*a),i.push(r[s+2]*a),i.push(r[s+3])}e.bones=o,e.vertices=tt.p.toFloatArray(i)}else{var u=tt.p.toFloatArray(r);if(1!=a)for(var s=0,h=r.length;s<h;s++)u[s]*=a;e.vertices=u}},we.prototype.readAnimation=function(t,e,n){var a=this.scale,r=new Array,i=0;if(t.slots)for(var o in t.slots){var s=t.slots[o],h=n.findSlotIndex(o);if(-1==h)throw new Error("Slot not found: "+o);for(P in s){var l=s[P];if("attachment"==P){var c=new ht(l.length);c.slotIndex=h;for(var u=0,d=0;d<l.length;d++){var f=l[d];c.setFrame(u++,this.getValue(f,"time",0),f.name)}r.push(c),i=Math.max(i,c.frames[c.getFrameCount()-1])}else if("color"==P){for((c=new ot(l.length)).slotIndex=h,d=u=0;d<l.length;d++){var f=l[d],p=new tt.c;p.setFromString(f.color||"ffffffff"),c.setFrame(u,this.getValue(f,"time",0),p.r,p.g,p.b,p.a),this.readCurve(f,c,u),u++}r.push(c),i=Math.max(i,c.frames[(c.getFrameCount()-1)*ot.ENTRIES])}else{if("twoColor"!=P)throw new Error("Invalid timeline type for a slot: "+P+" ("+o+")");for((c=new st(l.length)).slotIndex=h,d=u=0;d<l.length;d++){f=l[d];var m=new tt.c,g=new tt.c;m.setFromString(f.light),g.setFromString(f.dark),c.setFrame(u,this.getValue(f,"time",0),m.r,m.g,m.b,m.a,g.r,g.g,g.b),this.readCurve(f,c,u),u++}r.push(c),i=Math.max(i,c.frames[(c.getFrameCount()-1)*st.ENTRIES])}}}if(t.bones)for(var v in t.bones){var y=t.bones[v],E=n.findBoneIndex(v);if(-1==E)throw new Error("Bone not found: "+v);for(P in y)if(l=y[P],"rotate"===P){for((c=new nt(l.length)).boneIndex=E,d=u=0;d<l.length;d++)f=l[d],c.setFrame(u,this.getValue(f,"time",0),this.getValue(f,"angle",0)),this.readCurve(f,c,u),u++;r.push(c),i=Math.max(i,c.frames[(c.getFrameCount()-1)*nt.ENTRIES])}else{if("translate"!==P&&"scale"!==P&&"shear"!==P)throw new Error("Invalid timeline type for a bone: "+P+" ("+v+")");var c=null,x=1,w=0;for("scale"===P?(c=new rt(l.length),w=1):"shear"===P?c=new it(l.length):(c=new at(l.length),x=a),c.boneIndex=E,d=u=0;d<l.length;d++){f=l[d];var b=this.getValue(f,"x",w),S=this.getValue(f,"y",w);c.setFrame(u,this.getValue(f,"time",0),b*x,S*x),this.readCurve(f,c,u),u++}r.push(c),i=Math.max(i,c.frames[(c.getFrameCount()-1)*at.ENTRIES])}}if(t.ik)for(var I in t.ik){var T=t.ik[I],M=n.findIkConstraint(I);for((c=new dt(T.length)).ikConstraintIndex=n.ikConstraints.indexOf(M),d=u=0;d<T.length;d++)f=T[d],c.setFrame(u,this.getValue(f,"time",0),this.getValue(f,"mix",1),this.getValue(f,"softness",0)*a,this.getValue(f,"bendPositive",!0)?1:-1,this.getValue(f,"compress",!1),this.getValue(f,"stretch",!1)),this.readCurve(f,c,u),u++;r.push(c),i=Math.max(i,c.frames[(c.getFrameCount()-1)*dt.ENTRIES])}if(t.transform)for(var I in t.transform){for(T=t.transform[I],M=n.findTransformConstraint(I),(c=new ft(T.length)).transformConstraintIndex=n.transformConstraints.indexOf(M),d=u=0;d<T.length;d++)f=T[d],c.setFrame(u,this.getValue(f,"time",0),this.getValue(f,"rotateMix",1),this.getValue(f,"translateMix",1),this.getValue(f,"scaleMix",1),this.getValue(f,"shearMix",1)),this.readCurve(f,c,u),u++;r.push(c),i=Math.max(i,c.frames[(c.getFrameCount()-1)*ft.ENTRIES])}if(t.path)for(var I in t.path){var T=t.path[I],A=n.findPathConstraintIndex(I);if(-1==A)throw new Error("Path constraint not found: "+I);var R=n.pathConstraints[A];for(P in T)if(l=T[P],"position"===P||"spacing"===P){for(c=null,x=1,"spacing"===P?(c=new mt(l.length),R.spacingMode!=_t.Length&&R.spacingMode!=_t.Fixed||(x=a)):(c=new pt(l.length),R.positionMode==tt.i.Fixed&&(x=a)),c.pathConstraintIndex=A,d=u=0;d<l.length;d++)f=l[d],c.setFrame(u,this.getValue(f,"time",0),this.getValue(f,P,0)*x),this.readCurve(f,c,u),u++;r.push(c),i=Math.max(i,c.frames[(c.getFrameCount()-1)*pt.ENTRIES])}else if("mix"===P){for((c=new gt(l.length)).pathConstraintIndex=A,d=u=0;d<l.length;d++)f=l[d],c.setFrame(u,this.getValue(f,"time",0),this.getValue(f,"rotateMix",1),this.getValue(f,"translateMix",1)),this.readCurve(f,c,u),u++;r.push(c),i=Math.max(i,c.frames[(c.getFrameCount()-1)*gt.ENTRIES])}}if(t.deform)for(var C in t.deform){var V=t.deform[C],k=n.findSkin(C);if(null!=k)for(var o in V){if(s=V[o],-1==(h=n.findSlotIndex(o)))throw new Error("Slot not found: "+s.name);for(var P in s){var l=s[P],F=k.getAttachment(h,P);if(null==F)throw new Error("Deform attachment not found: "+l.name);var N=null!=F.bones,_=F.vertices,Y=N?_.length/3*2:_.length;(c=new lt(l.length)).slotIndex=h,c.attachment=F;for(var u=0,X=0;X<l.length;X++){f=l[X];var O=void 0,B=this.getValue(f,"vertices",null);if(null==B)O=N?tt.p.newFloatArray(Y):_;else{var O=tt.p.newFloatArray(Y),D=this.getValue(f,"offset",0);if(tt.p.arrayCopy(B,0,O,D,B.length),1!=a)for(var L=(d=D)+B.length;d<L;d++)O[d]*=a;if(!N)for(d=0;d<Y;d++)O[d]+=_[d]}c.setFrame(u,this.getValue(f,"time",0),O),this.readCurve(f,c,u),u++}r.push(c),i=Math.max(i,c.frames[c.getFrameCount()-1])}}else if(tt.r.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+C)}var W=t.drawOrder;if(null!=(W=null==W?t.draworder:W)){c=new ut(W.length);for(var q=n.slots.length,X=u=0;X<W.length;X++){var U=W[X],H=null,j=this.getValue(U,"offsets",null);if(null!=j){var H=tt.p.newArray(q,-1),G=tt.p.newArray(q-j.length,0),Z=0,z=0;for(d=0;d<j.length;d++){var Q=j[d];if(-1==(h=n.findSlotIndex(Q.slot)))throw new Error("Slot not found: "+Q.slot);for(;Z!=h;)G[z++]=Z++;H[Z+Q.offset]=Z++}for(;Z<q;)G[z++]=Z++;for(d=q-1;0<=d;d--)-1==H[d]&&(H[d]=G[--z])}c.setFrame(u++,this.getValue(U,"time",0),H)}r.push(c),i=Math.max(i,c.frames[c.getFrameCount()-1])}if(t.events){for(c=new ct(t.events.length),d=u=0;d<t.events.length;d++){var J=t.events[d],K=n.findEvent(J.name);if(null==K)throw new Error("Event not found: "+J.name);var $=new Ut(tt.p.toSinglePrecision(this.getValue(J,"time",0)),K);$.intValue=this.getValue(J,"int",K.intValue),$.floatValue=this.getValue(J,"float",K.floatValue),$.stringValue=this.getValue(J,"string",K.stringValue),null!=$.data.audioPath&&($.volume=this.getValue(J,"volume",1),$.balance=this.getValue(J,"balance",0)),c.setFrame(u++,$)}r.push(c),i=Math.max(i,c.frames[c.getFrameCount()-1])}if(isNaN(i))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new et(e,r,i))},we.prototype.readCurve=function(t,e,n){var a;t.hasOwnProperty("curve")&&("stepped"===t.curve?e.setStepped(n):(a=t.curve,e.setCurve(n,a,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))))},we.prototype.getValue=function(t,e,n){return void 0!==t[e]?t[e]:n},we.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return r.b.NORMAL;if("additive"==t)return r.b.ADD;if("multiply"==t)return r.b.MULTIPLY;if("screen"==t)return r.b.SCREEN;throw new Error("Unknown blend mode: "+t)},we.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return tt.i.Fixed;if("percent"==t)return tt.i.Percent;throw new Error("Unknown position mode: "+t)},we.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return _t.Length;if("fixed"==t)return _t.Fixed;if("percent"==t)return _t.Percent;throw new Error("Unknown position mode: "+t)},we.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return tt.k.Tangent;if("chain"==t)return tt.k.Chain;if("chainscale"==t)return tt.k.ChainScale;throw new Error("Unknown rotate mode: "+t)},we.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return tt.o.Normal;if("onlytranslation"==t)return tt.o.OnlyTranslation;if("norotationorreflection"==t)return tt.o.NoRotationOrReflection;if("noscale"==t)return tt.o.NoScale;if("noscaleorreflection"==t)return tt.o.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},we),ye=function(t,e,n,a,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=a,this.inheritDeform=r},Ee=(o(xe,ne=tt.l),xe.prototype.createSkeleton=function(t){this.skeleton=new se(t),this.skeleton.updateWorldTransform(),this.stateData=new Bt(t),this.state=new Q(this.stateData)},xe);function xe(){return null!==ne&&ne.apply(this,arguments)||this}function we(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}function be(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new tt.h(function(){return tt.p.newFloatArray(16)})}function Se(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}function Ie(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}function Te(t){t=ae.call(this,t,0,!1)||this;return t.bones=new Array,t.rotateMix=0,t.translateMix=0,t.scaleMix=0,t.shearMix=0,t.offsetRotation=0,t.offsetX=0,t.offsetY=0,t.offsetScaleX=0,t.offsetScaleY=0,t.offsetShearY=0,t.relative=!1,t.local=!1,t}function Me(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}function Ae(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var n,a=t.bones[e],r=void 0;null==a.parent?r=new Lt(a,this,null):(n=this.bones[a.parent.index],r=new Lt(a,this,n),n.children.push(r)),this.bones.push(r)}for(this.slots=new Array,this.drawOrder=new Array,e=0;e<t.slots.length;e++){var i=t.slots[e],i=(r=this.bones[i.boneData.index],new ie(i,r));this.slots.push(i),this.drawOrder.push(i)}for(this.ikConstraints=new Array,e=0;e<t.ikConstraints.length;e++){var o=t.ikConstraints[e];this.ikConstraints.push(new jt(o,this))}for(this.transformConstraints=new Array,e=0;e<t.transformConstraints.length;e++){var s=t.transformConstraints[e];this.transformConstraints.push(new oe(s,this))}for(this.pathConstraints=new Array,e=0;e<t.pathConstraints.length;e++){var h=t.pathConstraints[e];this.pathConstraints.push(new re(h,this))}this.color=new tt.c(1,1,1,1),this.updateCache()}function Re(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new tt.q,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}function Ce(t,e){if(this.deform=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new tt.c,this.darkColor=null==t.darkColor?null:new tt.c,this.setToSetupPose(),this.blendMode=this.data.blendMode}function Ve(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,a=t.bones.length;n<a;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}}}]);